<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title>Hexo</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Startseite
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archiv
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/02/JavaScriptThirteen/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/02/JavaScriptThirteen/" itemprop="url">Web前端的知识之旅哟——DOM的基本操作续</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-02T16:54:05+08:00">
                2018-01-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>上一篇文章介绍了如何用DOM来查看元素，这一篇就把剩下的增删改操作介绍一下。</p>
<h3 id="增加操作"><a href="#增加操作" class="headerlink" title="增加操作"></a><strong><span style="color: #ff0000;">增加操作</span></strong></h3><p>1.<strong><span style="color: #ff0000;">创建元素节点 createElement</span></strong></p>
<p>我们可以通过document.createElement(‘div’);这个方法来创建一个元素，里面的参数填写我们要创建的<strong><span style="color: #ff0000;">标签名称</span></strong>，像div、p、span等等。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> div </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">createElement</span><span class="pun">(</span><span class="str">‘div’</span><span class="pun">);</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这样我们先创建一个div。</p>
<p>2.<strong><span style="color: #ff0000;">创建文本节点 document.createTextNode</span></strong></p>
<p>我们可以通过document.createTextNode(‘abcd’)方法来创建一个文本节点，里面的参数填写我们的文本内容。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> text </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">createTextNode</span><span class="pun">(</span><span class="str">‘hello’</span><span class="pun">);</span><span class="pln"> &nbsp; </span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这里我们再创建一个文本节点。</p>
<p>3.<strong><span style="color: #ff0000;">创建注释节点 document.createComment</span></strong></p>
<p>我们可以通过document.createComment(‘comment’);方法来创建一个注释节点，参数写我们要写的注释内容。虽然我从来没用过…但是还是要介绍这个方法。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> comment </span><span class="pun">=</span><span class="pln">&nbsp;document</span><span class="pun">.</span><span class="pln">createComment</span><span class="pun">(</span><span class="str">‘comment’</span><span class="pun">);</span><span class="pln"> &nbsp; </span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这里我们再创建一个注释文本节点。</p>
<p>4.<strong><span style="color: #ff0000;">创建文档碎片 document.createDocumentFragment</span></strong></p>
<p>这个方法可以创建一个文档碎片，我们在后面讲的有关提高性能的部分会用到这个方法。</p>
<h3 id="插入操作"><a href="#插入操作" class="headerlink" title="插入操作"></a><span style="color: #ff0000;">插入操作</span></h3><p>1.<strong><span style="color: #ff0000;">appendChild(child);</span></strong></p>
<p>这个是父级调用的方法，它会将child元素插入到父级里面，而且是放到逻辑后面的位置上。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">div</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="pln">text</span><span class="pun">);</span><br>2.  <span class="pln">div</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="pln">comment</span><span class="pun">);</span><span class="pln"> &nbsp; </span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这样div里面就会有一行文本一行注释。</p>
<p>这里如果是我们创建的元素，那么appendChild就是把新元素插入进去，但是如果是DOM里面已经存在的元素，那么appendChild就是把这个已经存在的元素给剪切掉，然后放到新的位置上。</p>
<p>2.<strong><span style="color: #ff0000;">insertBefore(a, b);</span></strong></p>
<p>这个依然是父节点调用的方法，它的意思是将a插入到b前面的位置上，其中b要求是这个父级的子节点。这个方法可以记作为 insert a before b;</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> span </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">createElement</span><span class="pun">(</span><span class="str">‘span’</span><span class="pun">);</span><br>2.  <span class="pln">div</span><span class="pun">.</span><span class="pln">insertBefore</span><span class="pun">(</span><span class="pln">span</span><span class="pun">,</span><span class="pln"> comment</span><span class="pun">);</span><span class="pln"> &nbsp; </span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这样我们就把一个span元素插入到了刚才的注释文本前面。</p>
<h3 id="删除操作"><a href="#删除操作" class="headerlink" title="删除操作"></a><span style="color: #ff0000;">删除操作</span></h3><p><strong><span style="color: #ff0000;">removeChild</span></strong></p>
<p>这个方法依然是父级调用的，参数就是要删除的子节点，其实实际上是<strong><span style="color: #ff0000;">剪切</span></strong>，这个方法会把我们删除掉的元素给<strong><span style="color: #ff0000;">返回</span></strong>，我们可以用一个变量去保存这个被删除的元素。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> div </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">body</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="pln">div</span><span class="pun">);</span><span class="pln"> &nbsp; </span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这样我们的div变量就可以保存刚才被删除的div这个元素。</p>
<h3 id="替换操作"><a href="#替换操作" class="headerlink" title="替换操作"></a><span style="color: #ff0000;">替换操作</span></h3><p><strong><span style="color: #ff0000;">replaceChild(new, origin)</span></strong></p>
<p>这个方法同样是父级调用，用新的元素new来替换原来的origin元素，原来的被替换掉的元素可以被返回，我们可以像删除操作那样用一个变量来保存。</p>
<p>现在我们就可以通过以上这些方法来动态创建一棵DOM树了哟~</p>
<p>下面介绍一些Element节点的属性和方法。</p>
<p><strong><span style="color: #ff0000;">属性</span></strong></p>
<p>1.<strong><span style="color: #ff0000;">innerHTML</span></strong></p>
<p>这个属性可以用字面意思来理解，元素里面的<strong><span style="color: #ff0000;">HTML结构</span></strong>。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">div</span><span class="pun">.</span><span class="pln">innerHML </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘&lt;div&gt;123&lt;/div&gt;’</span><span class="pun">;</span><span class="pln"> &nbsp; </span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>我们可以直接通过这个属性来改变元素内部的结构和内容，不过注意它会直接删除掉以前的所有结构，如果以前内容还有其他的节点的话，使用的时候就要小心了。</p>
<p>2.<span style="color: #ff0000;"><strong>innerText/textContent</strong></span></p>
<p>innerText老版本的<span style="color: #ff0000;">火狐浏览器</span>不兼容，textContent老版本的<span style="color: #ff0000;">IE浏览器</span>不兼容。</p>
<p>这个属性可以直接调出来元素内部的文本信息，若果这个元素还有很多的子元素的话，那么会把子元素里面的文本信息一起返回。</p>
<p>不过需要注意的是，如果我们要改写innerText或者textContent的话，它会像innerHTML一样，<span style="color: #ff0000;">先把内部的所有html结构先删除掉</span>，然后再写入text文本，因此里面有html结构的时候写入也要小心。</p>
<p>• 这里提一下，如果我们有很多字符串要添加到一个元素的内部的话，虽然用innerHTML或者innerText方法，但是却不是用innerHML += str的方法，因为+=操作符的效率极低，当字符串很多的时候会非常非常消耗性能。</p>
<p>遇到这种情况我们一般是用数组的join方法将字符串全部连接成一个字符串，然后一次性写入innerHTML。</p>
<p><strong><span style="color: #ff0000;">方法</span></strong></p>
<p>1.<strong><span style="color: #ff0000;">ele.setAttribute();</span></strong></p>
<p>这个方法可以设置元素的属性（特性），比如class、id等一些行间属性。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">div</span><span class="pun">.</span><span class="pln">setAttribute</span><span class="pun">(</span><span class="str">‘id’</span><span class="pun">,</span><span class="pln"> </span><span class="str">‘demo’</span><span class="pun">);</span><span class="pln"> &nbsp; </span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这个操作就可以给div这个元素设置一个叫做demo的id。</p>
<p>2.<strong><span style="color: #ff0000;">ele.getAttribute();</span></strong></p>
<p>这个方法是获取元素的行间属性。</p>
<p>• 同样这里需要提一下，每个元素自带的行间属性都有自己特殊的功能，而我们通过自己给他们设置的属性并没有任何功能，因此我们可以来赋予他们功能和用处。</p>
<p>• 还有一点，我们在后面改变元素的样式的时候，通常不是直接修改他的css样式，而是事先写好它应该变成的样式，然后装进一个class里面，<span style="color: #ff0000;">我们直接修改他的类名而不是css样式</span>。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/02/JavaScriptTwelve/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/02/JavaScriptTwelve/" itemprop="url">Web前端的知识之旅哟——DOM的基础练习代码</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-02T16:53:28+08:00">
                2018-01-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>上一篇介绍了一下DOM的一些基础的知识，这里我整理了一些有关上一篇知识点的一些封装函数。</p>
<p>1.<strong><span style="color: #ff0000;">遍历元素节点树</span></strong></p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> retChild</span><span class="pun">(</span><span class="pln">node</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> child </span><span class="pun">=</span><span class="pln"> node</span><span class="pun">.</span><span class="pln">childNodes</span><span class="pun">,</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; len </span><span class="pun">=</span><span class="pln"> child</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> len</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++){</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">child</span><span class="pun">[</span><span class="pln">i</span><span class="pun">].</span><span class="pln">nodeType </span><span class="pun">===</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">child</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]);</span><br>7.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; child</span><span class="pun">[</span><span class="pln">i</span><span class="pun">].</span><span class="pln">hasChildNodes</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> retChild</span><span class="pun">(</span><span class="pln">child</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]);</span><br>8.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>9.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>10.  <span class="pun">}</span><span class="pln"> &nbsp; </span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>2.<strong><span style="color: #ff0000;">封装函数，返回元素e的第n层父节点</span></strong></p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> retParent</span><span class="pun">(</span><span class="pln">e</span><span class="pun">,</span><span class="pln"> n</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> n </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">||</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> </span><span class="com">// 进行简单的容错检测</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">n </span><span class="pun">===</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> e</span><span class="pun">;</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> e </span><span class="pun">&amp;&amp;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> n</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><br>7.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e </span><span class="pun">=</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">parentNode</span><span class="pun">;</span><br>8.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>9.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> e</span><span class="pun">;</span><br>10.  <span class="pun">}</span><span class="pln"> &nbsp; </span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>3.<strong><span style="color: #ff0000;">封装函数，返回元素e的第n个兄弟元素节点，如果n为正，返回后面的兄弟元素节点，n为负，返回前面的，n为0，返回自己</span></strong></p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> retSibling</span><span class="pun">(</span><span class="pln">e</span><span class="pun">,</span><span class="pln"> n</span><span class="pun">){</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> n </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">||</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">n </span><span class="pun">===</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> e</span><span class="pun">;</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">while</span><span class="pun">(</span><span class="pln">e </span><span class="pun">&amp;&amp;</span><span class="pln"> n </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>7.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">n </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>8.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">nextElementSibling</span><span class="pun">){</span><span class="pln"> </span><span class="com">// 如果不是ie浏览器</span><br>9.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e </span><span class="pun">=</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">nextElementSibling</span><span class="pun">;</span><br>10.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="com">// 如果是ie浏览器</span><br>11.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e </span><span class="pun">=</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">nextSibling</span><span class="pun">;</span><br>12.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">while</span><span class="pun">(</span><span class="pln">e </span><span class="pun">&amp;&amp;</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">nodeType </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>13.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e</span><span class="pun">=</span><span class="pln">e</span><span class="pun">.</span><span class="pln">nextSibling</span><span class="pun">;</span><br>14.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>15.  <span class="pln">&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>16.  <span class="pln">&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; n</span><span class="pun">–;</span><br>17.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><br>18.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">previousElementSibling</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>19.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; e </span><span class="pun">=</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">previousElementSibling</span><span class="pun">;</span><br>20.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><br>21.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e </span><span class="pun">=</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">previousSibling</span><span class="pun">;</span><br>22.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">while</span><span class="pun">(</span><span class="pln">e </span><span class="pun">&amp;&amp;</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">nodeType </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>23.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e</span><span class="pun">=</span><span class="pln">e</span><span class="pun">.</span><span class="pln">previousSibling</span><span class="pun">;</span><br>24.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>25.  <span class="pln">&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>26.  <span class="pln">&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; n</span><span class="pun">++;</span><br>27.  <span class="pln">&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>28.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>29.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> e</span><span class="pun">;</span><br>30.  <span class="pun">}</span><span class="pln"> &nbsp; </span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>4.<strong><span style="color: #ff0000;">封装函数，实现children功能，最好哎原型链上编程</span></strong></p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="typ">Element</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">getChildren</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> child </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">childNodes</span><span class="pun">,</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;len </span><span class="pun">=</span><span class="pln"> child</span><span class="pun">.</span><span class="pln">length</span><span class="pun">,</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; obj </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="str">‘length’</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="str">‘push’</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Array</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">push</span><br>7.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>8.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> len</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++){</span><br>9.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">child</span><span class="pun">[</span><span class="pln">i</span><span class="pun">].</span><span class="pln">nodeType </span><span class="pun">===</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>10.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; obj</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">child</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]);</span><br>11.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>12.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>13.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> obj</span><span class="pun">;</span><br>14.  <span class="pun">}</span><span class="pln"> &nbsp; </span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>5.<strong><span style="color: #ff0000;">封装是否有元素子节点的方法</span></strong></p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="typ">Element</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">hasChildren </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> child </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">childNodes</span><span class="pun">,</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; len </span><span class="pun">=</span><span class="pln"> child</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">var</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> len</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++){</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">child</span><span class="pun">[</span><span class="pln">i</span><span class="pun">].</span><span class="pln">nodeType </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><br>7.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>8.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>9.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><br>10.  <span class="pun">}</span><span class="pln"> &nbsp; </span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>上面的代码都是我自己写的，可能有些地方不是最优的解法，大家看看就好~</p>
<p>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/02/JavaScriptEleven/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/02/JavaScriptEleven/" itemprop="url">Web前端的知识之旅哟——DOM!</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-02T16:53:17+08:00">
                2018-01-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>到上一篇文章结束我感觉ECMAScript的部分应该差不多了，所以接下来开始总结DOM的知识点了哟~</p>
<h3 id="什么是DOM"><a href="#什么是DOM" class="headerlink" title="什么是DOM"></a><span style="color: #ff0000;">什么是DOM</span></h3><p>什么叫做DOM呢？</p>
<p>• DOM的全称是<span style="color: #ff0000;">Document Object Model 文档对象模型</span>，DOM定义了表示和修改文档所需的对象、这些对象的行为和属性以及这些对象之间的关系。</p>
<p>• DOM对象即为宿主对象，由浏览器厂商定义，用来操作html的css功能的一类对象和集合。不过浏览器厂商之间大部分都遵循w3c标准。</p>
<p>• 简单来说，<span style="color: #ff0000;">DOM就是用来操作html和css的，它是一系列对象的集合</span>。</p>
<h3 id="DOM如何操作HTML"><a href="#DOM如何操作HTML" class="headerlink" title="DOM如何操作HTML"></a><span style="color: #ff0000;">DOM如何操作HTML</span></h3><p>document代表整个文档，它也是一个dom元素，我们dom对html的操作，即使对html的增删改查。下面我就介绍一下dom都是如何增删改查html的。</p>
<p>那么我们如何查看元素节点？</p>
<p>我们知道css中有id、class、标签等选择器，同样，我们的document对象上也定义了很多类似的方法来查看元素节点。</p>
<div><img src="file:///" alt="">&nbsp;• <strong><span style="color: #ff0000;">getElementById</span></strong></div><br><div>document.getElementById(‘id’);方法是通过元素的id来选择出相对应的元素的，因为id是唯一标示，所以方法名中是Element。</div><br><div><img src="file:///" alt="">值得注意的是，<span style="color: #ff0000;">在ie8以下的浏览器中，不区分大小写，而且标签的name属性也可以被当做id被选择出来</span>。</div><br><div><span style="color: #0000ff;">&lt;div name=”demo”&gt;&lt;/div&gt;</span></div><br><div><span style="color: #0000ff;">var div = document.getElementById(‘demo’); </span></div><br><div>这里同样把这个div选择出来了。</div><br><div><img src="file:///" alt="">&nbsp;•<span style="color: #ff0000;"><strong> getElementsByClassName</strong></span></div><br><div>document.getElementsByClassName(‘class’); 获取到的是一个<span style="color: #ff0000;">类数组</span>，因为很多元素都可以有一个类名。我们可以通过[]的方式来选择到具体的哪一个元素。</div><br><div><span style="color: #0000ff;">&lt;div class=”demo”&gt;&lt;/div&gt;</span></div><br><div><span style="color: #0000ff;">&lt;div class=”demo”&gt;&lt;/div&gt;</span></div><br><div><span style="color: #0000ff;">var div = document.getElementsByClassName(‘div’)[1];</span></div><br><div>这样我们就可以选择到第二个div了。</div><br><div>不过如果我们碰到这种情况该怎么办？</div><br><div><span style="color: #0000ff;">&lt;div class=”demo”&gt;&lt;/div&gt;</span></div><br><div><span style="color: #0000ff;">&lt;div class=”demo demo1″&gt;&lt;/div&gt;</span></div><br><div><span style="color: #0000ff;">&lt;div class=”demo1″&gt;&lt;/div&gt;</span></div><br><div>我们改如何选择出来第二个div？</div><br><div>这里，我们的getElementsByClassName其实后面可以填写<span style="color: #ff0000;">多个类名</span>。</div><br><div><span style="color: #0000ff;">var div = document.getElementsByClassName(‘demo demo1’)[0];</span></div><br><div>这样，我们就可以选择出来第二个div了。</div><br><div>但是值得注意的是，<span style="color: #ff0000;">ie8及以下的版本中没有这种方法</span>。</div><br><div>&nbsp;•<strong><span style="color: #ff0000;"> getElementsByTagName</span></strong></div><br><div>document.getElementsByTagName(‘div’);这个方法是可以选择出来具体某一种元素的集合，像前面这一段就可以选择出全部的div集合，当然也是一个类数组。</div><br><div>这个方法所有版本的浏览器都兼容。</div><br><div>&nbsp;•&nbsp;<span style="color: #ff0000;"><strong>getElementsByName</strong></span></div><br><div>document.getElementsByName();需要注意的是，只有部分标签的name可以生效，比如表单、表单元素、img、iframe等。</div><br><div><span style="color: #0000ff;">&lt;input name=”123″/&gt;</span></div><br><div><span style="color: #0000ff;">document.getElementsByName(‘123’)[0];</span></div><br><div>同样是选择出来一组，不过这个方法不是很常用。</div><br><div>&nbsp;• 这里面我们我们最常用的是id和tag，因为全版本都支持。</div><br><div>&nbsp;•<strong><span style="color: #ff0000;"> querySelector()</span></strong></div><br><div>&nbsp;•<strong><span style="color: #ff0000;"> querySelectorAll()</span></strong></div><br><div>这两个方法通常放在一起说。</div><br><div>我们知道选择元素最强的是css，而这两个里面写的参数就是我们css选择器的写法。</div><br><div><span style="color: #0000ff;">document.querySelector(‘div p #demo .demo);</span></div><br><div>不过querySelector永远选择一组里面的第一个，所以返回的不是一个类数组而是一个具体的元素。</div><br><div>而我们如果要返回一个类数组的集合的话，那么就用第二个querySelectorAll()方法。</div><br><div>不过这两个方法的问题在于，他们返回的不像前面四个是一个实时改变的元素，而是一个副本。当我们用这两个方法选择出来元素之后，我们把本身那个元素修改一下，会发现我们选择出来的那个元素没有变化。</div><br><div><span style="color: #0000ff;">&lt;div class=”content”&gt;111&lt;/div&gt;</span><br><br><span style="color: #0000ff;"> &lt;div class=”content”&gt;222&lt;/div&gt;</span><br><br><span style="color: #0000ff;"> &lt;div class=”content”&gt;333&lt;/div&gt;</span></div><br><div><span style="color: #0000ff;">var div = document.querySelectorAll(‘.content’);</span><br><br><span style="color: #0000ff;"> var div1 = document.getElementsByClassName(‘content’)[0];</span><br><br><span style="color: #0000ff;"> console.log(div);</span><br><br><span style="color: #0000ff;"> div1.remove();</span><br><br><span style="color: #0000ff;"> console.log(div);</span></div><br><div>我们发现两次打印出来的都是[div.content, div.content, div.content]，也就是说我们实际删除的那个元素对用querySelector选择出来的那个副本没有影响。</div><br><div>不过，<span style="color: #ff0000;">在ie7及以下的版本没有这两个方法</span>。</div><br><div>我们以后提到的jQuery里面的选择器，虽然是基于Sizzle的，但是Sizzle是基于querySelector写的。</div>

<h3 id="节点"><a href="#节点" class="headerlink" title="节点"></a><strong><span style="color: #ff0000;">节点</span></strong></h3><p><span style="color: #ff0000;"><strong>节点类型</strong></span></p>
<div>我们页面里面的节点类型很多，比如元素节点、文本节点、注释节点、属性节点等等。</div><br><div>我们可以通过nodeType属性来查看这个节点的类型是什么。而nodeType返回的是一些数字，下面介绍几个基础的类型和数字的对应关系：</div><br><div><span style="color: #ff0000;">元素节点——1</span><br><br><span style="color: #ff0000;">属性节点——2</span><br><br><span style="color: #ff0000;">文本节点——3</span><br><br><span style="color: #ff0000;">注释节点——8</span><br><br><span style="color: #ff0000;">document——9</span><br><br><span style="color: #ff0000;">DocumentFragment——11</span></div><br><div></div><br><div><span style="color: #ff0000;"><strong>节点的其他属性</strong></span></div><br><div>&nbsp;•<strong><span style="color: #ff0000;"> nodeName</span></strong></div><br><div>这个属性可以返回元素的标签名，以大写的形式表示，只读，不允许写入。</div><br><div>有几个特殊的节点返回的也不太一样：</div><br><div>文本节点–&gt; #text</div><br><div>注释节点–&gt; #comment</div><br><div>document节点–&gt;#document</div><br><div>&nbsp;• <strong><span style="color: #ff0000;">nodeValue</span></strong></div><br><div>Text节点或者Comment节点的文本内容，可以读写</div><br><div>&nbsp;•<strong><span style="color: #ff0000;"> attributes</span></strong></div><br><div>把元素的行间属性都读取出来，放到一个对象里面返回，对象里面的每一个属性都是一个节点，这个节点就是我们前面提到的属性节点。</div><br><div>注意：对象里面的属性叫做property，而元素里面的属性叫attributes，实际应该叫特性。</div><br><div><strong><span style="color: #ff0000;">节点还有一个方法</span></strong></div><br><div>hasChildNodes()可以检测是否有子节点</div>

<h3 id="遍历节点树"><a href="#遍历节点树" class="headerlink" title="遍历节点树"></a><span style="color: #ff0000;">遍历节点树</span></h3><p>• <strong><span style="color: #ff0000;">parentNode</span> </strong>查找父节点</p>
<p><span style="color: #0000ff;">&lt;div&gt;</span></p>
<p><span style="color: #0000ff;">&nbsp; &nbsp; &nbsp; &lt;p&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/p&gt;</span></p>
<p><span style="color: #0000ff;"> &lt;/div&gt;</span></p>
<p>这里strong的父节点就是p，p的父节点是div，div的父节点是body，body的父节点是html，html的父节点是document，document的父节点是null，在后面就没有了。</p>
<p>• <strong><span style="color: #ff0000;">childNodes</span> </strong>子节点们</p>
<p>div.childNodes 没有说明类型，那么就是说这个方法是把所有的子节点都返回。</p>
<p><span style="color: #0000ff;">&lt;div&gt;</span></p>
<p><span style="color: #0000ff;">&nbsp; &nbsp; &nbsp; &lt;p&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/p&gt;</span></p>
<p><span style="color: #0000ff;">&lt;/div&gt;</span></p>
<p>还是这个例子，我们div里面的childNodes其实有3个，第一个是前面的空格——文本节点，第二个是中间的p标签——元素节点，第三个是最后的空格——文本节点。</p>
<p>•<strong><span style="color: #ff0000;"> firstChild </span></strong><span style="color: #ff0000;"><span style="color: #000000;">第一个子节点</span></span></p>
<p>•<strong><span style="color: #ff0000;"> lastChild&nbsp;</span></strong><span style="color: #ff0000;"><span style="color: #000000;">最后一个子节点</span></span></p>
<p>• <strong><span style="color: #ff0000;">nextSibling</span> </strong>下一个兄弟节点</p>
<p>• <strong><span style="color: #ff0000;">previousSibling</span> </strong>上一个兄弟节点</p>
<p>以上这些方法的兼容性都很好，所有的浏览器都支持，但是下面这些就不行了。</p>
<p><strong><span style="color: #ff0000;">基于元素节点树的遍历</span></strong></p>
<p>• <strong><span style="color: #ff0000;">parentElement</span></strong> 返回当前元素的父元素节点</p>
<p>在这个方法上面，html上面的父元素节点就不是document而是null了。</p>
<p>但是ie不支持这个方法。</p>
<p>• <strong><span style="color: #ff0000;">children</span> </strong>所有子元素节点</p>
<p>这个方法所有的浏览器都兼容。</p>
<p>•&nbsp;<strong><span style="color: #ff0000;">childElementCount</span></strong></p>
<p>node.children.length === node.childElementCount</p>
<p>这个属性就是子元素节点的数量，不过我更常用前面的那个。</p>
<p>• <strong><span style="color: #ff0000;">nextElementSibling</span></strong></p>
<p>• <strong><span style="color: #ff0000;">previousElementSibling</span></strong></p>
<p>这两个方法分别是找上一个和下一个兄弟元素节点，但是ie都不兼容。</p>
<h3 id="DOM结构树"><a href="#DOM结构树" class="headerlink" title="DOM结构树"></a><strong><span style="color: #ff0000;">DOM结构树</span></strong></h3><p><img src="http://www.flyingliu.com/wp-content/uploads/2016/09/dom.png" alt="dom"></p>
<p>这个图表中说明了每一个对象的父级。</p>
<p>浏览器除了可以处理html页面外，还可以处理xml和xhtml等页面。</p>
<p>我们发现HTMLDocument继承自HTMLDocument.prototype，我们在原型上定义一个属性来测试一下。</p>
<p><span style="color: #0000ff;">HTMLDocument.prototype.abc = 123;</span></p>
<p><span style="color: #0000ff;">document.abc; // 123</span></p>
<p><span style="color: #0000ff;">document.getElementById(‘demo’).abc; // 报错</span></p>
<p>由此可见，HTMLDocument确实继承HTMLDocument对象的属性，但是相对的Element上面并没有这个方法。</p>
<p>这里的Node上面也还是有父级的，我们可以通过Node.prototype来查看，这里就不举例了。</p>
<p>下面是一些DOM结构树的总结：</p>
<p>1.getId方法定义在Document.prototype上，即Element节点上不能使用。</p>
<p>2.getElementByName方法定义在HTMLDocument.prototype上，非html中的document不能使用(xml document、Element);</p>
<p>3.getElementsByTagName方法定义在Document.prototype和Element.prototype上，也就是document和元素都可以用这个方法。</p>
<p>4.HTMLDocument.prototype上定义了一些常用的属性，body、head分别代指HTML文档中的&lt;body&gt;&lt;head&gt;标签。</p>
<p>5.Document.prototype上定义了documentElement属性，指代文档的根元素，在html文档中，它总代指&lt;html&gt;元素。</p>
<p>6.getElementByClassName、querySelectorAll、querySelector在Document、Element类中均有定义。</p>
<p>今天的DOM知识就到这里结束了哟~</p>
<p>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/02/JavaScriptTen/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/02/JavaScriptTen/" itemprop="url">Web前端的知识之旅哟——类数组与严格模式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-02T16:53:10+08:00">
                2018-01-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我们知道有两种数据叫做数组和对象，但是我们其实可以用对象来模拟出数组的效果，我们把这种对象叫做类数组。我们前面提到的<span style="color: #ff0000;">arguments实参列表就是一个类数组</span>。</p>
<h3 id="类数组"><a href="#类数组" class="headerlink" title="类数组"></a><span style="color: #ff0000;">类数组</span></h3><p>类数组并不是一个数组，但是它可以表现出数组的特性。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> arrObj </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="str">‘0’</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="str">‘1’</span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="str">‘2’</span><span class="pun">:</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="str">‘length’</span><span class="pun">:</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="str">‘push’</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Array</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">push</span><br>7.  <span class="pun">}</span><span class="pln"> &nbsp; </span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这样我们就创造了一个类数组，现在它就可以表现出数组的特性了。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">arrObj</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="lit">4</span><span class="pun">);</span><br>2.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">arrObj</span><span class="pun">);</span><br>3.  <span class="pun">-&gt;</span><span class="pln">&nbsp;</span><br>4.  <span class="pln">arrObj</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="str">‘0’</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="str">‘1’</span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><br>7.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="str">‘2’</span><span class="pun">:</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><br>8.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="str">‘3’</span><span class="pun">:</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><br>9.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="str">‘length’</span><span class="pun">:</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><br>10.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="str">‘push’</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Array</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">push</span><br>11.  <span class="pun">}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>我们会发现它自动改变了length值，这就非常神奇了。</p>
<p>其实类数组的<span style="color: #ff0000;">关键就在这个<strong>length</strong>属性</span>上，如果没有length属性，那么就是一个普通的对象，即使有push方法也不能使用。</p>
<p>现在我们来模拟一下数组的push方法是怎么实现的：</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="typ">Array</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">push </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">num </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">[</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">length</span><span class="pun">++].</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> num</span><span class="pun">;</span><br>3.  <span class="pun">}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>push方法就是在数组的最后添加一个值，也就是说length的位置加一个元素，然后把length加1，这样我们也就不难理解为什么有了length属性的对象可以调用数组的push方法了，因为它本身带有一个合法的length属性。</p>
<p>现在我们有一个这样的题：</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> arrObj </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp;</span><span class="str">“3”</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp;</span><span class="str">“4”</span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp;</span><span class="str">“a”</span><span class="pun">:</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp;</span><span class="str">“b”</span><span class="pun">:</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp;</span><span class="str">“length”</span><span class="pun">:</span><span class="lit">2</span><span class="pun">,</span><br>7.  <span class="pln">&nbsp; &nbsp; &nbsp;</span><span class="str">‘push’</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Array</span><span class="pun">.</span><span class="pln">ptototype</span><span class="pun">.</span><span class="pln">push</span><br>8.  <span class="pun">}</span><br>9.  <span class="pln">arrObj</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="lit">3</span><span class="pun">);</span><br>10.  <span class="pln">arrObj</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="lit">6</span><span class="pun">);</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>我们最后的arrObj是什么样子的？</p>
<p>仔细看一下push的方法之后，我们就知道了，最后的arrObj应该是这个样子的：</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> arrObj </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp;</span><span class="str">“2”</span><span class="pun">:</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp;</span><span class="str">“3”</span><span class="pun">:</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp;</span><span class="str">“4”</span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp;</span><span class="str">“a”</span><span class="pun">:</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp;</span><span class="str">“b”</span><span class="pun">:</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><br>7.  <span class="pln">&nbsp; &nbsp; &nbsp;</span><span class="str">“length”</span><span class="pun">:</span><span class="lit">4</span><span class="pun">,</span><br>8.  <span class="pln">&nbsp; &nbsp; &nbsp;</span><span class="str">‘push’</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Array</span><span class="pun">.</span><span class="pln">ptototype</span><span class="pun">.</span><span class="pln">push</span><br>9.  <span class="pun">}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这里的length是2，所以一开始push(3)的时候把arrObj[2]改成了3，因为本身没有2这个下标，所以添加一条属性2:3，然后length变成了3，push(6)之后，arrObj[3]变成了6，本身有3这一条属性所以覆盖，然后把length变成4。</p>
<h3 id="try…catch"><a href="#try…catch" class="headerlink" title="try…catch"></a><span style="color: #ff0000;">try…catch</span></h3><p>try {} catch (e) {} finally {}一般是用来检测可能出错的问题的。</p>
<p>我们把可能出错的代码块放入try里面，然后把如果出错会产生的反应代码放到catch里面，finally就是挡catch走完之后再走一下finally代码块，finally的用处不是很大。</p>
<p>catch的参数e一定要写上，系统会自动传进去错误信息，错误信息一共有以下6种：</p>
<p>1.EvalError eval()的使用与定义不一致</p>
<p>2.RangeError 数值越界</p>
<p><span style="color: #ff0000;">3.ReferenceError 非法或不能识别的引用数值</span></p>
<p><span style="color: #ff0000;">4.SyntaxError 发生语法解析错误</span></p>
<p>5.TypeError 操作数类型错误</p>
<p>6.URIError URI处理函数使用不当</p>
<p>其中3和4比较常见。</p>
<p><span style="color: #ff0000;">当try里面的代码出错了，try里面出错代码后面的代码就不会执行了，但是在try外面的代码还是正常执行的</span>。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">a</span><span class="pun">);</span><br>3.  <span class="pun">}</span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">e</span><span class="pun">);</span><span class="pln"> </span><span class="com">//&nbsp;ReferenceError: a is not defined(…)</span><br>5.  <span class="pun">}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<h3 id="ES5严格模式"><a href="#ES5严格模式" class="headerlink" title="ES5严格模式"></a><span style="color: #ff0000;">ES5严格模式</span></h3><p>es5的严格模式是一种全新的es5规范，在这个模式下，有一些es3的不标准的规则就不能使用了。</p>
<p>我们只要在代码的第一行写上<strong><span style="color: #ff0000;">“use strict”;</span></strong>这一行字符串就可以进入严格模式了，不会对不兼容严格模式的浏览器产生影响。</p>
<p>严格模式主要有两种用法：</p>
<p>1.全局严格模式</p>
<p>2.局部严格模式</p>
<p>全局模式就是我们在整个js代码的第一行写上字符串，而局部模式就是在函数里面的第一行写上字符串。</p>
<p>这里<span style="color: #ff0000;">不推荐使用全局严格模式</span>。</p>
<p>严格模式有什么作用？</p>
<p>1.当我们的代码进入严格模式之后，就<strong><span style="color: #ff0000;">不允许使用with函数，arguments.callee方法，func.caller属性</span></strong>。</p>
<p>2.变量赋值之前<strong><span style="color: #ff0000;">必须声明</span></strong>。</p>
<p>3.局部的this使用前必须被赋值，除了全局的this默认指向window，其他的<span style="color: #ff0000;">默认都是<strong>undefiend</strong></span>。而且在非严格模式下，Person.call(null/undefined)之后，里面的this还是指向window，但是如果是严格模式的话，<span style="color: #ff0000;">那么传递null，this就指向null，传递undefiend，this就指向undefiend</span>。</p>
<p>4.<strong><span style="color: #ff0000;">拒绝重复属性和参数</span></strong>。不过有一些浏览器的属性名可以重复。</p>
<p>下面介绍一下with方法是什么。</p>
<p><strong><span style="color: #ff0000;">with</span></strong></p>
<p>with () {} 的作用是<strong><span style="color: #ff0000;">改变作用域链</span></strong>，它可以把括号里面的执行期上下文或者作用域放在自己的作用域链的最顶端。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> obj </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">a</span><span class="pun">:</span><span class="pln"> </span><span class="lit">123</span><span class="pun">};</span><br>2.  <span class="kwd">function</span><span class="pln"> test </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> </span><span class="lit">111</span><span class="pun">;</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> </span><span class="lit">222</span><span class="pun">;</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">with</span><span class="pln"> </span><span class="pun">(</span><span class="pln">obj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">a</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 123</span><br>7.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">b</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 222</span><br>8.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>9.  <span class="pun">}</span><br>10.  <span class="pln">test</span><span class="pun">();</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>本来如果没有with的话，在test函数里面作用域链的最顶端应该是自身，然后在下面才是window的作用域，但是用with之后，我们把obj放在了自身上面，成为了最上面的作用域，这样我们打印a，就会优先调用obj里面的a属性，如果有就用，没有的话再向下找第二层test函数的作用域。</p>
<p>那么今天的知识点就介绍到这里哟~</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/02/JavaScriptNine/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/02/JavaScriptNine/" itemprop="url">Web前端的知识之旅哟——克隆与数组</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-02T16:53:04+08:00">
                2018-01-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在开始介绍克隆的代码和数组的相关知识点之前，我在前面先介绍一下<span style="color: #ff0000;">arguments.callee方法</span>和<span style="color: #ff0000;">func.caller属性</span>。</p>
<p>•<strong><span style="color: #ff0000;"> arguments.callee</span></strong></p>
<p>这个方法是代指函数本身。</p>
<p>当我们在一些<span style="color: #ff0000;">匿名函数或者立即执行函数</span>里面进行递归调用函数本身的时候，由于这个函数没有名字，我们不能用函数名的方式调用，就可以用arguments.callee来调用。</p>
<p>一般当我们需要通过计算来进行初始化的时候，我们写一个立即执行函数，当这个立即执行函数还需要递归调用自身的时候，我们就是用arguments.callee方法。</p>
<p>•<span style="color: #ff0000;"> func.caller</span></p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> test </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">test</span><span class="pun">.</span><span class="kwd">caller</span><span class="pun">);</span><br>3.  <span class="pun">}</span><br>4.  <span class="kwd">function</span><span class="pln"> demo </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; test</span><span class="pun">()</span><br>6.  <span class="pun">}</span><br>7.  <span class="pln">demo</span><span class="pun">();</span><span class="pln"> </span><span class="com">// function demo(){}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这是函数本身自带的一个属性，可以指出当前函数ude运行环境的函数引用，即<span style="color: #ff0000;">这个函数是在哪个函数体里面执行</span>的。</p>
<p>个人感觉这个东西并没有什么用……</p>
<h3 id="克隆"><a href="#克隆" class="headerlink" title="克隆"></a><span style="color: #ff0000;">克隆</span></h3><p>克隆和我们前面所讲的继承有一些区别，克隆是复制出来一个一模一样的目标对象，而克隆又分为浅层克隆和深层克隆。</p>
<p>• <strong><span style="color: #ff0000;">浅层克隆</span></strong></p>
<p>克隆大致就是我们的源对象里面有什么属性，目标文件就有什么属性，依照这个原理，我们可以写出下面的代码：</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> clone</span><span class="pun">(</span><span class="pln">src</span><span class="pun">,</span><span class="pln"> tar</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> tar </span><span class="pun">=</span><span class="pln"> tar </span><span class="pun">||</span><span class="pln"> </span><span class="pun">{};</span><span class="pln"> </span><span class="pun">如果没有</span><span class="pln">tar</span><span class="pun">则默认是一个空对象</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> prop </span><span class="kwd">in</span><span class="pln">&nbsp;src</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">src</span><span class="pun">.</span><span class="pln">hasOwnProperty</span><span class="pun">(</span><span class="pln">prop</span><span class="pun">)){</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tar</span><span class="pun">[</span><span class="pln">prop</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> src</span><span class="pun">[</span><span class="pln">prop</span><span class="pun">];</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>7.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">}</span><br>8.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> tar</span><span class="pun">;</span><span class="pln"> </span><br>9.  <span class="pun">}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>当我们我的源对象src有一个自身的属性，就会在目标对象tar克隆一个对应的属性。</p>
<p>下面我们来测试一下:</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> obj </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; name</span><span class="pun">:</span><span class="pln"> </span><span class="str">‘scarlett’</span><span class="pun">,</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; age</span><span class="pun">:</span><span class="pln"> </span><span class="lit">123</span><br>4.  <span class="pun">}</span><br>5.  <span class="kwd">var</span><span class="pln"> obj2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{}</span><br>6.  <span class="pln">clone</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> obj2</span><span class="pun">);</span><br>7.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">obj2</span><span class="pun">.</span><span class="pln">name</span><span class="pun">);</span><span class="com">// scarlett</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>然后我们改变一下obj这个源对象的name：</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">obj</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘test’</span><span class="pun">;</span><br>2.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">obj2</span><span class="pun">.</span><span class="pln">name</span><span class="pun">);</span><span class="pln"> </span><span class="com">// scarlett</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>我们可以发现，克隆出来的目标对象和本来的源对象之间没有关系了。</p>
<p>但是，当我们有一个属性是引用值（数组或者对象）的时候，按照我们这种克隆方式，只是把这个引用值的指向赋给了新的目标对象，也就是说，我们一旦改变了源对象或者目标对象的引用值属性，另一个也会跟着改变，这一点就是浅层克隆的缺点。</p>
<p>• <strong><span style="color: #ff0000;">深层克隆</span></strong></p>
<p>为了解决浅层克隆的引用值的问题，我们又需要一种深层克隆。</p>
<p>其实深层克隆的原理也很简单，我们只要不克隆引用值的引用，而是吧引用值也当做一个源对象，把里面的值一个一个的克隆进目标对象里面，不就解决了他们二者相同指向的问题了吗。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> deepCopy</span><span class="pun">(</span><span class="pln">src</span><span class="pun">,</span><span class="pln">tar</span><span class="pun">){</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> tar</span><span class="pun">=</span><span class="pln"> tar</span><span class="pun">||</span><span class="pln"> </span><span class="pun">{}</span><span class="pln"> </span><span class="pun">;</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> prop </span><span class="kwd">in</span><span class="pln"> src</span><span class="pun">){</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">typeof</span><span class="pln"> </span><span class="pun">(</span><span class="pln">src</span><span class="pun">[</span><span class="pln">prop</span><span class="pun">])</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">‘object’</span><span class="pun">){</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tar</span><span class="pun">[</span><span class="pln">prop</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">src</span><span class="pun">[</span><span class="pln">prop</span><span class="pun">].</span><span class="pln">constructor </span><span class="pun">===</span><span class="pln"> </span><span class="typ">Array</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="pun">[]</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="pun">{};</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; deepCopy</span><span class="pun">(</span><span class="pln">src</span><span class="pun">[</span><span class="pln">prop</span><span class="pun">],</span><span class="pln">tar</span><span class="pun">[</span><span class="pln">prop</span><span class="pun">]);</span><br>7.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><br>8.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tar</span><span class="pun">[</span><span class="pln">prop</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> src</span><span class="pun">[</span><span class="pln">prop</span><span class="pun">];</span><br>9.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>10.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>11.  <span class="pln">&nbsp;</span><br>12.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> tar</span><span class="pun">;</span><br>13.  <span class="pun">}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这里我们运用了<span style="color: #ff0000;">递归调用</span>的方法，当我们检测到源对象里面的这个属性值是<strong><span style="color: #ff0000;">引用类型</span></strong>的，那么就在目标对象里面也创建一个引用类型的属性，如果原来是数组就创建数组，是对象就创建对象，然后分别将源对象里面的这个引用值和目标对象里面的引用值分别当做新的源对象和目标对象进行克隆，这样就是克隆的里面每一个值了，而不是把整个引用都克隆过去。</p>
<p>现在我们来测试一下：</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> parent </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; name </span><span class="pun">:</span><span class="pln"> </span><span class="str">‘ScarLet’</span><span class="pun">,</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; age </span><span class="pun">:</span><span class="pln"> </span><span class="lit">123</span><span class="pun">,</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; sex </span><span class="pun">:</span><span class="pln"> </span><span class="str">‘male’</span><span class="pun">,</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; height </span><span class="pun">:</span><span class="pln"> </span><span class="lit">190</span><span class="pun">,</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; money</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">,</span><span class="lit">5</span><span class="pun">]</span><br>7.  <span class="pun">}</span><br>8.  <span class="kwd">var</span><span class="pln"> child </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{};</span><br>9.  <span class="pln">deepCopy</span><span class="pun">(</span><span class="pln">parent</span><span class="pun">,</span><span class="pln">child</span><span class="pun">);</span><br>10.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">child</span><span class="pun">.</span><span class="pln">money</span><span class="pun">);</span><span class="pln"> </span><span class="com">//1 2 3 4 5</span><br>11.  <span class="pln">parent</span><span class="pun">.</span><span class="pln">money</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="lit">10</span><span class="pun">);</span><br>12.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">child</span><span class="pun">.</span><span class="pln">money</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 1 2 3 4 5</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这个时候目标对象和源对象的引用值之间就没有了关系，自己都是独立值，可以进行修改了。</p>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a><span style="color: #ff0000;">数组</span></h3><p>•<strong><span style="color: #ff0000;"> 数组的声明</span></strong></p>
<p>首先来介绍一下数组的声明方式，一共有两种：</p>
<p>1.<strong><span style="color: #ff0000;">字面量方式</span></strong>声明数组。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> arr </span><span class="pun">[];</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>2.通过<strong><span style="color: #ff0000;">数组构造函数</span></strong>构造数组。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> arr </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Array</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">);</span><br>2.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 1 2 3 4</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这种方式和字面量方式没有区别，但是要注意的是，如果我们在构造函数里面<span style="color: #ff0000;">只写一个数字</span>new Array(5);这个时候这个数字就不是第一个值是5的意思了，而是我们新创建的这个数组<strong><span style="color: #ff0000;">长度</span></strong>是5。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> arr </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Array</span><span class="pun">(</span><span class="lit">10</span><span class="pun">);</span><br>2.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">);</span><span class="pln"> </span><span class="com">//10</span><br>3.  <span class="pln">document</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 9个逗号 这里用console的话是一个空数组，看不到长度</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>• <strong><span style="color: #ff0000;">数组的读写</span></strong></p>
<p>js的数组是弱数据类型的数组，不像其他语言那样严格。</p>
<p>我们<strong><span style="color: #ff0000;">不可以溢出读</span></strong></p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> arr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">];</span><br>2.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]);</span><span class="pln"> </span><span class="com">// undefined</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>但是我们<strong><span style="color: #ff0000;">可以溢出写</span></strong></p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">arr</span><span class="pun">[</span><span class="lit">5</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pun">;</span><br>2.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 1,2,,,,5</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p><strong><span style="color: #ff0000;">数组的常用方法</span></strong></p>
<p>数组的方法大致可以分类两类：不改变原数组的和改变原数组的。</p>
<p>1.<strong><span style="color: #ff0000;">改变原数组的</span></strong></p>
<p>改变原数组的方法主要有：reverse,sort,push,pop,shift,unshift,splice</p>
<p>•<strong><span style="color: #ff0000;"> reverse</span></strong></p>
<p>reverse是使数组倒叙。</p>
<p>• <strong><span style="color: #ff0000;">push</span></strong></p>
<p>push在数组最后的位置增加数据。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">push</span><span class="pun">(</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>•<strong><span style="color: #ff0000;"> pop</span></strong></p>
<p>pop从数组后面删除一位数据，同时返回这个被删除的数据，没有参数。</p>
<p>• <strong><span style="color: #ff0000;">shift</span></strong></p>
<p>从数据的最前面删除一位数据，同时返回这个数据，没有参数。</p>
<p>• <strong><span style="color: #ff0000;">unshift</span></strong></p>
<p>在数据的最前面添加数据，和push一样的用法。</p>
<p>• <strong><span style="color: #ff0000;">splice</span></strong></p>
<p>这个方法是截取的意思，它有三个参数，第一个是截取开始的位置，第二个是截取的长度，第三个是参数是一组数据，代表我们要在截取的位置添加的数据。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> arr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">];</span><br>2.  <span class="pln">arr</span><span class="pun">.</span><span class="pln">splice</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="lit">188</span><span class="pun">);</span><br>3.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 1 100 188 4 5</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这样2和3就被截掉了。</p>
<p>如果我们不写要添加的数据的话，这个方法就变成了在数组中删除数据的作用了。</p>
<p>如果我们截取的长度是0，然后添加数据的话，这个方法就变成了在数据的特定位置添加数据的作用了。</p>
<p>•<strong><span style="color: #ff0000;"> sort</span></strong></p>
<p>这个方法是快速排序的意思，它将一种算法封装好了给我们使用。</p>
<p>我们可以在这个方法中传入一个参数，这个参数是一个函数，规定了我们的排序规则，否则就按照ASC码来排序。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">arr </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="lit">5</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="lit">3</span><br>2.  <span class="pln">arr</span><span class="pun">.</span><span class="pln">sort </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="lit">5</span><br>3.  <span class="pln">arr </span><span class="pun">-&gt;</span><span class="pln"> a c b d</span><br>4.  <span class="pln">arr</span><span class="pun">.</span><span class="pln">sort </span><span class="pun">-&gt;</span><span class="pln"> a b c d</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>如果我们数组中的元素是比较复杂的数据的话，我们就需要自己来定义排序的规则了。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">arr</span><span class="pun">.</span><span class="pln">sort</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> x</span><span class="pun">.</span><span class="pln">age </span><span class="pun">&lt;</span><span class="pln"> y</span><span class="pun">.</span><span class="pln">age</span><span class="pun">;</span><br>3.  <span class="pun">})</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这里的x、y代表的是数组里面任意的两位数据。</p>
<p>无论中间的规则怎么写，系统只关注函数最后的返回值是正数还是负数。</p>
<p><span style="color: #ff0000;">负数的时候，表示a在前面，b在后面。</span></p>
<p><span style="color: #ff0000;">正数的时候，表示a在后面，b在前面。</span></p>
<p>乱序排序：</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> num </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">random</span><span class="pun">()</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">0.5</span><span class="pun">;</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp;</span><span class="kwd">return</span><span class="pln"> num</span><span class="pun">;</span><br>4.  <span class="pun">}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>•<strong><span style="color: #ff0000;"> 不改变原数组的</span></strong></p>
<p>改变原数组的方法主要有：</p>
<p>concat,join</p>
<p>•<strong><span style="color: #ff0000;"> concat</span></strong></p>
<p>这个方法是连接的数组的作用。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">arr1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">];</span><br>2.  <span class="pln">arr2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">];</span><br>3.  <span class="pln">arr </span><span class="pun">=</span><span class="pln"> arr1</span><span class="pun">.</span><span class="pln">concat</span><span class="pun">(</span><span class="pln">arr2</span><span class="pun">);</span><br>4.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">,</span><span class="pln"> arr1</span><span class="pun">,</span><span class="pln"> arr2</span><span class="pun">);</span><span class="com">// [1, 2, 2, 3], &nbsp;[1, 2], [2, 3];</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>我们发现arr现在是1和2连接之后的数组，而且1和2本来的数组都没有改变。</p>
<p>当然我们如果要连接多个数组的话，那么concat里面的数组之间用逗号分隔即可。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">arr3 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">];</span><br>2.  <span class="pln">arr </span><span class="pun">=</span><span class="pln"> arr1</span><span class="pun">.</span><span class="pln">concat</span><span class="pun">(</span><span class="pln">arr2</span><span class="pun">,</span><span class="pln"> arr3</span><span class="pun">);</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>• <strong><span style="color: #ff0000;">join</span></strong></p>
<p>这个方法是让数组的每一个数据以什么方式连接成字符串。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> arr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">‘a’</span><span class="pun">,</span><span class="pln"> </span><span class="str">‘b’</span><span class="pun">,</span><span class="pln"> </span><span class="str">‘c’</span><span class="pun">];</span><br>2.  <span class="kwd">var</span><span class="pln"> str </span><span class="pun">=</span><span class="pln"> arr</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="str">‘-‘</span><span class="pun">);</span><br>3.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">str</span><span class="pun">);</span><span class="pln"> </span><span class="com">// a-b-c</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>我们可以用这个方法来进行大量字符串的连接工作，如果我们用+运算符去连接字符串的话，因为是栈操作，所以很消耗性能，我们可以先放进数组里面，然后用join连接成字符串即可。</p>
<p>同时，<strong><span style="color: #ff0000;">字符串</span></strong>中以一个<strong><span style="color: #ff0000;">split</span></strong>操作刚好和join操作相反。</p>
<p><span style="color: #ff0000;">split是把字符串以什么方式分割成数组</span>。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> str </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘a-b-c-d’</span><span class="pun">;</span><br>2.  <span class="kwd">var</span><span class="pln"> arr </span><span class="pun">=</span><span class="pln"> str</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(-</span><span class="str">‘);</span><br>3.  <span class="str">console.log(arr); // a b c d</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p><strong><span style="color: #ff0000;">数组去重问题</span></strong></p>
<p>这里有一个我们必须要掌握的方法——数组去重方法。</p>
<p>把数组中重复的元素去掉。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="typ">Array</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">unique </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> len </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">length</span><span class="pun">,</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; arr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[],</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; obj </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{};</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> len</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">obj</span><span class="pun">[</span><span class="kwd">this</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]])</span><span class="pln"> </span><span class="pun">{</span><br>7.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; obj</span><span class="pun">[</span><span class="kwd">this</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><br>8.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; arr</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]);</span><br>9.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>10.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>11.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> arr</span><span class="pun">;</span><br>12.  <span class="pun">}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这里我们运用了一个简单的哈希结构。当我们数组中的这个数据出现过一次之后，我们就在obj中将这个元素的值的位置标记成1，后面如果出现相同的属性值，因为这个位置已经是1了，所以就不会添加到新数组里面，从而达到了去重的效果。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> arr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pln"> </span><span class="pun">,</span><span class="lit">1</span><span class="pln"> </span><span class="pun">,</span><span class="lit">2</span><span class="pln"> </span><span class="pun">,</span><span class="lit">3</span><span class="pln"> </span><span class="pun">,</span><span class="lit">4</span><span class="pln"> </span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">undefined</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">undefined</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">];</span><br>2.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">.</span><span class="pln">unique</span><span class="pun">());</span><span class="com">//[1, 2, 3, 4, 5, 6, undefined, null, 9]</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p><strong><span style="color: #ff0000;">ES5的数组方法</span></strong></p>
<p>刚才我们介绍的那些常用的数组方法都是ES3中定义的，ES5中出现了一些新的方法。</p>
<p>• <strong><span style="color: #ff0000;">forEach</span></strong></p>
<p>这个方法会改变原数组，它让数组中的元素从头到尾遍历一遍，每一个都调用一下我们在forEach里面传递的方法，中间不会停止。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> arr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">];</span><br>2.  <span class="pln">arr</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><br>4.  <span class="pun">})</span><br>5.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 2 3 4 5</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>• <strong><span style="color: #ff0000;">map</span></strong></p>
<p>这个方法和forEach很像，只不过forEach会改变原数组，而map不会改变原数组，而是返回一个新的数组，它也是让传递一个指定的方法，让数组中的每一个元素都调用一遍这个方法。不过记得map方法最后有返回值。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> arr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">];</span><br>2.  <span class="kwd">var</span><span class="pln"> test </span><span class="pun">=</span><span class="pln"> arr</span><span class="pun">.</span><span class="pln">map</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> x </span><span class="pun">*</span><span class="pln"> x</span><span class="pun">;</span><br>4.  <span class="pun">});</span><br>5.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">test</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 1 4 9</span><br>6.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 1 2 3</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>• <strong><span style="color: #ff0000;">filter</span></strong></p>
<p>这个方法是过滤的作用，它同样不会改变原数组，而是返回一个原数组的子集。我们同样会传递一个方法，每一个元素都会调用一下这个方法，但是只有返回true的元素才会被添加到新数组里面，返回false的不会被添加到新数组里面。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pln"> </span><span class="pun">,</span><span class="lit">2</span><span class="pln"> </span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">];</span><br>2.  <span class="kwd">var</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">filter</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> x </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">2</span><br>4.  <span class="pun">});</span><br>5.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">b</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 3 4 5</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>同时，<span style="color: #ff0000;">filter()会跳过稀疏数组里面缺少的元素，它的返回数组总是稠密的</span>。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> arr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,,,,,,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">];</span><br>2.  <span class="kwd">var</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> arr</span><span class="pun">.</span><span class="pln">filter</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><br>4.  <span class="pun">})</span><br>5.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 1 3 4</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>• <strong><span style="color: #ff0000;">every 和 some</span></strong></p>
<p>这两个方法是数组的逻辑判定，他们对数组应用指定的函数进行判定，返回true或者false。</p>
<p>every是如果<span style="color: #ff0000;">每一个元素</span>经过传递的方法的判定之后都返回true，那么最后才返回true。</p>
<p>some是<span style="color: #ff0000;">只要有一个元素</span>返回true，那么就返回true。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> arr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pln"> </span><span class="pun">,</span><span class="lit">2</span><span class="pln"> </span><span class="pun">,</span><span class="lit">3</span><span class="pun">];</span><br>2.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">.</span><span class="pln">some</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="kwd">return</span><span class="pln"> x</span><span class="pun">&lt;</span><span class="lit">3</span><span class="pun">;}));</span><span class="pln">&nbsp;</span><span class="kwd">true</span><br>3.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">.</span><span class="pln">every</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="kwd">return</span><span class="pln"> x</span><span class="pun">&lt;</span><span class="lit">3</span><span class="pun">;}));</span><span class="pln"> </span><span class="kwd">false</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>•<strong><span style="color: #ff0000;"> reduce 和 reduceRight</span></strong></p>
<p>reduce()和reduceRight()方法使用指定的函数将数组元素进行组合，最后变成一个值，reduce是从左向右，reduceRight是从右向左。有两个参数，第一个是方法，第二个是可选参数，即我们最后的这个值的初始值。</p>
<p>当我们没有设置初始值的时候，用数组的第一个元素的值作为初始值。不过当数组为空的时候，不带初始值就会报错。</p>
<p><span style="color: #ff0000;">当我们的数组只有一个元素并且没有指定初始值，或者有一个空数组并且指定一个初始值的情况下，reduce只是简单地返回那个值，而不会调用函数</span>。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> arr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">];</span><br>2.  <span class="kwd">var</span><span class="pln"> sum </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">reduce</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> x </span><span class="pun">+</span><span class="pln"> y</span><span class="pun">},</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="com">// 0 + 1 + 2 + 3 = 6;</span><br>3.  <span class="kwd">var</span><span class="pln"> temp </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span><br>4.  <span class="kwd">var</span><span class="pln"> temoOut </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">reduce</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="kwd">return</span><span class="pln"> x </span><span class="pun"><em></em></span><span class="pln"> x </span><span class="pun"></span><span class="pln"> y</span><span class="pun">});</span><span class="pln"> </span><span class="com">// 1 不会调用这个函数，因为数组只有一个值，除非我们设置一个初始值</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<h3 id="数组类型的检测"><a href="#数组类型的检测" class="headerlink" title="数组类型的检测"></a><span style="color: #ff0000;">数组类型的检测</span></h3><p>在ES5中，我们有一个<strong><span style="color: #ff0000;">isArray()</span></strong>方法来检测是否是数组。</p>
<p>但是在es5之前，我们要检测数据是否是数组类型是很麻烦的。</p>
<p>typeof运算符，数组和对象都会返回object，因此无法区分数组和对象。</p>
<p>constructor和instanceof操作符到现在为止是好用的，但是它们都存在潜藏问题：</p>
<p>我们的web浏览器中可能有多个窗口或者窗体，每一个窗体都有自己的js环境，有自己的全局对象。并且，每个全局对象有自己的构造函数，<span style="color: #ff0000;">因此一个窗体中的对象将不可能是另外窗体中的构造函数的实例</span>。窗体之间的混淆并不常发生，但这个问题已经证明constructor和instanceof都不能真正可靠的检测数组类型。</p>
<p>这个时候我们就需要这样的代码来检测了：</p>
<p><strong><span style="color: #ff0000;">Object.prototype.toString.call(arr) === ‘[object Array]’&nbsp;</span></strong></p>
<p>这是最可靠的检测是否是数组类型的方法。</p>
<p>今天的知识点就到这里哟~</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/02/JavaScriptEight/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/02/JavaScriptEight/" itemprop="url">Web前端的知识之旅哟——对象的枚举与this</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-02T16:52:58+08:00">
                2018-01-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a><span style="color: #ff0000;">命名空间</span></h3><p>在进入正文之前，我们先提一下<span style="color: #ff0000;">命名空间</span>的概念。</p>
<p>由于我们的一个项目是很多人开发的，每个人都有一套自己的变量，为了防止人和人之间变量的互相干扰，我们经常把自己的变量都放到相对应的模块里面，模块和模块之间是没有关系的，这样就算变量名相同也不会互相干扰。我们经常用对象来实现这种模块的作用。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> spacename </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; department1</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;person1</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{},</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;person2</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{},</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">……</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">},</span><br>7.  <span class="pln">&nbsp; &nbsp; &nbsp; department2</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><br>8.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;person1</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{},</span><br>9.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;person2</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{},</span><br>10.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">……</span><br>11.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>12.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">……</span><br>13.  <span class="pun">}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<h3 id="对象的枚举"><a href="#对象的枚举" class="headerlink" title="对象的枚举"></a><strong><span style="color: #ff0000;">对象的枚举</span></strong></h3><p>在介绍对象的枚举方法之前，我们要理解一个概念。</p>
<p>查看对象属性我们知道可以用obj.name这样的点操作符来查看，但是我们还有一种其他的方式：</p>
<p><strong><span style="color: #ff0000;">obj[‘name’]</span></strong></p>
<p>这种方法类似数组的查看，但其实事实是数组模仿了对象的查看方式。</p>
<p>这种方法是在系统底层里面的查看对象属性的写法，我们常用的点操作符obj.name在系统底层其实也<span style="color: #ff0000;">转化</span>成了obj[‘name’]这种形式。</p>
<p>下面来介绍一下对象的枚举方法：</p>
<p><strong><span style="color: #ff0000;">for-in操作符</span></strong></p>
<p>我们知道要枚举一个数组的所有元素，只要用一个for循环从头到尾遍历一遍就可以了。</p>
<p>但是对象并不能用for循环来遍历属性，所以这里我们就要使用for-in操作了。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> obj </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; name</span><span class="pun">:</span><span class="pln"> </span><span class="str">‘scarlett’</span><span class="pun">,</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; age</span><span class="pun">:</span><span class="pln"> </span><span class="lit">18</span><span class="pun">,</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; sex</span><span class="pun">:</span><span class="pln"> </span><span class="str">‘female’</span><br>5.  <span class="pun">}</span><br>6.  <span class="kwd">for</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> prop </span><span class="kwd">in</span><span class="pln"> obj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>7.  <span class="pln">&nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">prop </span><span class="pun">+</span><span class="pln"> </span><span class="str">‘: ‘</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> obj</span><span class="pun">[</span><span class="pln">prop</span><span class="pun">]);</span><br>8.  <span class="pun">}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>我们for-in循环会按照属性的顺序取出属性名然后 赋给prop，所以我们打印的<span style="color: #ff0000;">prop都是属性名，obj[prop]则是相对应的属性的值</span>。</p>
<p>注意：这里我们不能写成obj.prop的形式，因为在系统底层会转化成obj[‘prop’]的形式，但是我们并没有prop这个属性，它应该是一个变量，所以会打印出来undefined，这里我们<span style="color: #ff0000;">必须使用<strong>obj[prop]</strong>来调用</span>。</p>
<p>在es3和es5的非严格模式下，for-in循环都会把原型里面的属性一起打印出来，es5的严格模式不会。</p>
<p>下面我们来介绍三种操作符：</p>
<p>1.<strong><span style="color: #ff0000;">hasOwnProperty</span></strong></p>
<p>这个操作符的作用是查看当前这个属性是不是对象自身的属性，<span style="color: #ff0000;">在原型链上的属性则会被过滤掉</span>。如果是自身的，就返回true，否则返回false。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘scarlett’</span><br>3.  <span class="pun">}</span><br>4.  <span class="typ">Person</span><span class="pun">.</span><span class="pln">prototype </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; age</span><span class="pun">:</span><span class="lit">18</span><br>6.  <span class="pun">}</span><br>7.  <span class="kwd">var</span><span class="pln"> oPerson </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">();</span><br>8.  <span class="kwd">for</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> prop </span><span class="kwd">in</span><span class="pln"> oPerson</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>9.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">oPerson</span><span class="pun">.</span><span class="pln">hasOwnProperty</span><span class="pun">(</span><span class="pln">prop</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><br>10.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">oPerson</span><span class="pun">[</span><span class="pln">prop</span><span class="pun">];</span><br>11.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>12.  <span class="pun">}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这样，我们的for-in循环就会只打印自身的name属性而不会去打印原型上的age属性。</p>
<p>2.<strong><span style="color: #ff0000;">in操作符</span></strong></p>
<p>这个操作符的作用是查看一个属性是不是在这个对象或者它的原型里面。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="str">‘name’</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> oPerson</span><span class="pun">;</span><span class="pln"> </span><span class="com">// true</span><br>2.  <span class="str">‘age’</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> oPerson</span><span class="pun">;</span><span class="pln"> </span><span class="com">// true</span><br>3.  <span class="str">‘sex’</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> oPerson</span><span class="pun">;</span><span class="pln"> </span><span class="com">// false</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>3.<strong><span style="color: #ff0000;">instanceof操作符</span></strong></p>
<p>这个操作符的作用是查看前面的对象是不是后面的构造函数构造出来的，和constructor挺像的。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">oPerson instanceof </span><span class="typ">Person</span><span class="pun">;</span><span class="pln"> </span><span class="com">// true</span><br>2.  <span class="pln">oPerson instanceof </span><span class="typ">Object</span><span class="pun">;</span><span class="pln"> </span><span class="com">// true</span><br>3.  <span class="pun">{}</span><span class="pln"> instanceof </span><span class="typ">Object</span><span class="pun">;</span><span class="pln"> </span><span class="com">// true</span><br>4.  <span class="pun">{}</span><span class="pln"> instanceof </span><span class="typ">Person</span><span class="pun">;</span><span class="pln"> </span><span class="com">//false</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>也可以理解为：<span style="color: #ff0000;">后面的构造器的原型是否在前面对象的原型链上</span>。</p>
<h3 id="this"><a href="#this" class="headerlink" title="this"></a><span style="color: #ff0000;">this</span></h3><p>1.预编译过程中 this–&gt;window</p>
<p>2.全局作用域里面 this–&gt;window</p>
<p>3.call/apply可以改变this指向</p>
<p>4.obj.func() func()里面的this指向obj</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> obj </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; height</span><span class="pun">:</span><span class="lit">190</span><span class="pun">,</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; eat</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">height</span><span class="pun">++;</span><span class="com">//eat在没有执行之前，谁也不知道this指向谁</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>6.  <span class="pun">}</span><br>7.  <span class="pln">obj</span><span class="pun">.</span><span class="pln">eat</span><span class="pun">();</span><span class="com">//后面的方法，谁调用它，里面的this就指向谁。</span><br>8.  <span class="pln">eat</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">);</span><span class="com">//eat的this指向obj</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这一些就是name的全部知识点，当我们能够理解下面这一段样例代码中的this的指向问题了，那么大家应该就掌握了this的所有问题了。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> name </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘222’</span><span class="pun">;</span><br>2.  <span class="kwd">var</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; name</span><span class="pun">:‘</span><span class="lit">111</span><span class="pun">’,</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; say</span><span class="pun">:</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name</span><span class="pun">);</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>7.  <span class="pun">}</span><br>8.  <span class="pln">&nbsp;</span><br>9.  <span class="kwd">var</span><span class="pln"> fun </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">say</span><span class="pun">;</span><br>10.  <span class="pln">fun</span><span class="pun">();</span><span class="pln">&nbsp;</span><br>11.  <span class="pln">a</span><span class="pun">.</span><span class="pln">say</span><span class="pun">();</span><span class="pln">&nbsp;</span><br>12.  <span class="kwd">var</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br>13.  <span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">‘333’</span><span class="pun">,</span><br>14.  <span class="pln">say</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">fun</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>15.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fun</span><span class="pun">();</span><br>16.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>17.  <span class="pun">}</span><br>18.  <span class="pln">&nbsp;</span><br>19.  <span class="pln">b</span><span class="pun">.</span><span class="pln">say</span><span class="pun">(</span><span class="pln">a</span><span class="pun">.</span><span class="pln">say</span><span class="pun">);</span><span class="pln">&nbsp;</span><br>20.  <span class="kwd">this</span><span class="pun">–&gt;</span><span class="pln">b</span><span class="pun">;</span><br>21.  <span class="pln">fun</span><span class="pun">();预编译过程</span><span class="pln"> fun</span><span class="pun">里面的</span><span class="kwd">this</span><span class="pun">指向</span><span class="pln">window</span><br>22.  <span class="pln">b</span><span class="pun">.</span><span class="pln">say </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">say</span><span class="pun">;</span><br>23.  <span class="pln">b</span><span class="pun">.</span><span class="pln">say</span><span class="pun">();</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>第一处打印调用fun()，这里其实就是把a.say这个函数的函数体赋给了fun这个函数，相当于在全局空间下写了一个func函数，里面的代码就是a.say里面的代码，所以此时的this指向window，因此打印222。</p>
<p>第二处打印调用了a.say()，按照我们前面说的谁调用函数，函数里面的this就指向谁，因此这里的this指向a，所以打印111。</p>
<p>第三处比较复杂，它调用了b.say(a.say))。这里其实是吧a.say这个函数体替换了原本b中fun的地方，我们在调用b.say()这个方法的时候，里面的this是指向b的，但是这个this并不在fun里面而是在say里面</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">say</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">fun</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">;</span><span class="com">// b</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; fun</span><span class="pun">();</span><br>4.  <span class="pun">}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>其实的结构应该是这样的，所以fun里面的this和我们所想的指向b的那个this不是一个东西，fun里面的this是在预编译阶段的指向window的，因此这里也打印222。其实和第一种直接在全局调用a.say的函数体方法差不多。</p>
<p>第四个b.say = a.say; b.say();其实也第二种一模一样的意思，不过此时的this指向b而已，因此打印333。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> name </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘222’</span><span class="pun">;</span><br>2.  <span class="kwd">var</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; name</span><span class="pun">:‘</span><span class="lit">111</span><span class="pun">’,</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; say</span><span class="pun">:</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name</span><span class="pun">);</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>7.  <span class="pun">}</span><br>8.  <span class="kwd">var</span><span class="pln"> fun </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">say</span><span class="pun">;</span><br>9.  <span class="pln">fun</span><span class="pun">();</span><span class="pln"> &nbsp;</span><span class="com">// 222</span><br>10.  <span class="pln">a</span><span class="pun">.</span><span class="pln">say</span><span class="pun">();</span><span class="pln"> &nbsp;</span><span class="com">// 111</span><br>11.  <span class="kwd">var</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br>12.  <span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">‘333’</span><span class="pun">,</span><br>13.  <span class="pln">say</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">fun</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>14.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fun</span><span class="pun">();</span><br>15.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>16.  <span class="pun">}</span><br>17.  <span class="pln">b</span><span class="pun">.</span><span class="pln">say</span><span class="pun">(</span><span class="pln">a</span><span class="pun">.</span><span class="pln">say</span><span class="pun">);</span><span class="pln"> &nbsp;</span><span class="com">// 222</span><br>18.  <span class="kwd">this</span><span class="pun">–&gt;</span><span class="pln">b</span><span class="pun">;</span><br>19.  <span class="pln">fun</span><span class="pun">();预编译过程</span><span class="pln"> fun</span><span class="pun">里面的</span><span class="kwd">this</span><span class="pun">指向</span><span class="pln">window</span><br>20.  <span class="pln">b</span><span class="pun">.</span><span class="pln">say </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">say</span><span class="pun">;</span><br>21.  <span class="pln">b</span><span class="pun">.</span><span class="pln">say</span><span class="pun">();</span><span class="pln"> </span><span class="com">// 333</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/02/JavaScriptSeven/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/02/JavaScriptSeven/" itemprop="url">Web前端的知识之旅哟——继承</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-02T16:52:50+08:00">
                2018-01-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="this的一些问题"><a href="#this的一些问题" class="headerlink" title="this的一些问题"></a><span style="color: #ff0000;">this的一些问题</span></h3><p>前面我们知道函数内部的this默认的指向是全局对象window，那么我们有什么办法可以改变this的指向吗？</p>
<p>现在我们就可以使用<span style="color: #ff0000;">call/apply</span>来<span style="color: #ff0000;">改变this指向</span>。</p>
<p><strong><span style="color: #ff0000;">call/apply</span></strong></p>
<p>作用：<strong><span style="color: #ff0000;">改变this指向<span style="color: #000000;">。</span></span></strong></p>
<p>区别：后面传的<span style="color: #ff0000;">参数形式不同</span>。</p>
<p>我们现在写一个函数</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> person </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘scarlett’</span><span class="pun">;</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span><br>4.  <span class="pun">}</span><br>5.  <span class="pln">person</span><span class="pun">();</span><span class="pln"> </span><span class="com">// window</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这个时候this指向window，name属性自然也就是window上面的全局属性。</p>
<p>现在我们来尝试使用一下call，看看有什么效果。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> obj </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{};</span><br>2.  <span class="pln">person</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">);</span><span class="pln"> </span><span class="com">//&nbsp;Object {name: “scarlett”}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>我们可以看到，当使用了call方法之后，person函数内部的this就指向了我们传递的这个对象。现在这个函数就可以为obj来赋属性值了。</p>
<p>如果这个函数还有参数的话，我们只要把实参的值写在call后面并且用逗号间隔开就可以了。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> person</span><span class="pun">(</span><span class="pln">name</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> name</span><span class="pun">;</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">age </span><span class="pun">=</span><span class="pln"> age</span><span class="pun">;</span><br>4.  <span class="pun">}</span><br>5.  <span class="kwd">var</span><span class="pln"> obj </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{};</span><br>6.  <span class="pln">person</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> </span><span class="str">‘scarlett’</span><span class="pun">,</span><span class="pln"> </span><span class="lit">18</span><span class="pun">);</span><br>7.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">.</span><span class="pln">name</span><span class="pun">);</span><span class="pln"> </span><span class="com">// scarlett</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>apply和call基本没有区别，唯一的区别是call后面的<span style="color: #ff0000;">参数是一个一个传的</span>，而apply后面的参数是放进一个<span style="color: #ff0000;">数组</span>里面然后传进去的。</p>
<p>还是上面那个例子，如果用apply来传递实参的话，将是下面这种形式。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">person</span><span class="pun">.</span><span class="pln">apply</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="str">‘scarett’</span><span class="pun">,</span><span class="pln"> </span><span class="lit">17</span><span class="pun">]);</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a><span style="color: #ff0000;">继承</span></h3><p>继承是这篇文章的重点部分。</p>
<p>首先介绍一下继承发展史。</p>
<p>第一阶段：<span style="color: #ff0000;">传统形式</span>。</p>
<p>这个阶段使用的继承方式就是我们上一篇文章介绍的那一种原型链式的继承。</p>
<p>但是这种继承有一个缺点就是它会继承过多没有用的属性，造成大量的浪费。</p>
<p>第二阶段：<span style="color: #ff0000;">借用构造函数</span>。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> </span><span class="typ">Foo</span><span class="pun">(</span><span class="pln">name</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> name</span><span class="pun">;</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">age </span><span class="pun">=</span><span class="pln"> age</span><span class="pun">;</span><br>4.  <span class="pun">}</span><br>5.  <span class="kwd">function</span><span class="pln"> </span><span class="typ">Son</span><span class="pun">(</span><span class="pln">name</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="typ">Foo</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> name</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">);</span><br>7.  <span class="pun">}</span><br>8.  <span class="kwd">var</span><span class="pln"> son </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Son</span><span class="pun">(</span><span class="str">‘son’</span><span class="pun">,</span><span class="pln"> </span><span class="lit">123</span><span class="pun">);</span><br>9.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">son</span><span class="pun">.</span><span class="pln">name</span><span class="pun">);</span><span class="pln"> </span><span class="com">// son</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这种方式就是利用了call和apply可以改变this指向的特点，通过构造函数来间接的构造子对象。</p>
<p>但是这种方式有两个缺点：</p>
<p>1.严格来说，这种方式<span style="color: #ff0000;">不属于继承</span>，也<span style="color: #ff0000;">访问不了原型的原型</span>。</p>
<p>2.每次构造一个对象都要走<span style="color: #ff0000;">两个</span>构造函数，效率很低。</p>
<p>第三阶段：<span style="color: #ff0000;">共享原型</span>。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="typ">Son</span><span class="pun">.</span><span class="pln">prototype </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Foo</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">;</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这种方式就是让父子构造函数的原型都一样，虽然这种方法让子构造函数可以访问原型链，也不用走两个构造函数了，但是缺点也很明显：<span style="color: #ff0000;">没办法改变子类的原型</span>，一改就两个一起改了。</p>
<p>第四阶段：<strong><span style="color: #ff0000;">圣杯模式</span></strong>。</p>
<p>这个阶段也是最终阶段，当然也是我们目前使用的方式。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> inherit </span><span class="pun">(</span><span class="pln">C</span><span class="pun">,</span><span class="pln"> P</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; </span><span class="kwd">function</span><span class="pln"> F </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span><br>3.  <span class="pln">&nbsp; &nbsp; F</span><span class="pun">.</span><span class="pln">prototype </span><span class="pun">=</span><span class="pln"> P</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">;</span><br>4.  <span class="pln">&nbsp; &nbsp; C</span><span class="pun">.</span><span class="pln">prototype </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> F</span><span class="pun">();</span><br>5.  <span class="pun">}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这里我们利用了一个中间函数F来沟通P和C的原型，这样我们改变C的原型的时候只会影响F而不会影响P，而F这里并没有任何的用处。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> </span><span class="typ">Child</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span><br>2.  <span class="kwd">function</span><span class="pln"> </span><span class="typ">Parent</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span><br>3.  <span class="typ">Parent</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘scarlett’</span><span class="pun">;</span><br>4.  <span class="pln">inherit</span><span class="pun">(</span><span class="typ">Child</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Parent</span><span class="pun">);</span><br>5.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Child</span><span class="pun">().</span><span class="pln">name</span><span class="pun">);</span><span class="pln"> </span><span class="com">//scarlett</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>但是现在我们还存在一个问题，当我们想查看Child构造出来的对象的构造函数的时候，它并不打印Child函数而是Parent函数。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Child</span><span class="pun">().</span><span class="pln">constructor</span><span class="pun">);</span><span class="pln"> </span><span class="com">//function Parent () {}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>所以我们前面的工作还不完善，还需要记录子类的构造函数。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">C</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">constructor </span><span class="pun">=</span><span class="pln"> C</span><span class="pun">;</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>同时我们为了保存一下它的父类，也用一个uber来记录一下父类。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">C</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">uber </span><span class="pun">=</span><span class="pln"> P</span><span class="pun">;</span><span class="pln"> </span><span class="com">// 因为super是保留字我们不能使用，所以用了一个uber</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>所以我们最终的形式就变成了这个样子：</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> inherit</span><span class="pun">(</span><span class="pln">C</span><span class="pun">,</span><span class="pln">P</span><span class="pun">){</span><br>2.  <span class="kwd">function</span><span class="pln"> F </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; F</span><span class="pun">.</span><span class="pln">prototype </span><span class="pun">=</span><span class="pln"> P</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">;</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; C</span><span class="pun">.</span><span class="pln">prototype </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> F</span><span class="pun">();</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; C</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">constructor </span><span class="pun">=</span><span class="pln"> C</span><span class="pun">;</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; C</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">uber </span><span class="pun">=</span><span class="pln"> P</span><span class="pun">;</span><br>7.  <span class="pun">}</span><br>8.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Child</span><span class="pun">().</span><span class="pln">constructor</span><span class="pun">);</span><span class="com">// Child</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>不过，这种写法虽然成功了，但是还是有一点点小瑕疵，这里面的F函数只是起到一个搭桥的功能，并没有什么实质性的作用，那么我们能不能舍弃掉这个东西呢？</p>
<p>虽然真的舍弃掉是不可能的，但是我们可以通过一定的方法来规避这个函数，让他不出现在我们的继承函数中。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> inherit </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(){</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> F </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(){};</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">C</span><span class="pun">,</span><span class="pln">P</span><span class="pun">){</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; F</span><span class="pun">.</span><span class="pln">prototype </span><span class="pun">=</span><span class="pln"> P</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">;</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C</span><span class="pun">.</span><span class="pln">prototype </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> F</span><span class="pun">();</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">constructor </span><span class="pun">=</span><span class="pln"> C</span><span class="pun">;</span><br>7.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">uber </span><span class="pun">=</span><span class="pln"> P</span><span class="pun">;</span><br>8.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>9.  <span class="pun">}());</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这样通过立即执行函数和闭包，我们既可以使用F函数，又可以不让它出现在我们的真正的继承函数中（即返回的那个函数）。</p>
<p>这种方法很重要，希望大家都记这一种方法！</p>
<p>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/02/JavaScriptSix/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/02/JavaScriptSix/" itemprop="url">Web前端的知识之旅哟——(补之前遗漏的)函数与作用域与闭包</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-02T16:52:43+08:00">
                2018-01-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>写完预编译之后才发现忘记写关于函数和闭包部分的知识点了……所以这里补上。</p>
<h3 id="函数部分"><a href="#函数部分" class="headerlink" title="函数部分"></a><span style="color: #ff0000;">函数部分</span></h3><p>我们的函数声明有两种方式：</p>
<p>1.<span style="color: #ff0000;">var demo = function () {} 函数表达式</span></p>
<p>2.<span style="color: #ff0000;">function demo () {} 函数声明</span></p>
<p>3.var demo = function xxx() {} 命名函数表达式</p>
<p>其实第一种和第三种相比较，第一种叫做匿名函数表达式，但是平时我们基本都使用第一种，很少使用第三种，因此第一种我们就简称为函数表达式了。</p>
<p>• 每一个函数里面都有一个类似数组的<span style="color: #ff0000;">类数组属性arguments</span>，这个属性里面存的就是<span style="color: #ff0000;">实参</span>。</p>
<p>arguments[0]就可以查看我们传递的第一个实参了。</p>
<p>函数有一个<span style="color: #ff0000;">length属性</span>，这个length储存的是<span style="color: #ff0000;">形参的数量</span>。</p>
<p>• 每一个函数都会有一个return，如果不写的话函数会自动加上一个return;</p>
<p>return的功能有两个：</p>
<p>1.返回这个函数的<span style="color: #ff0000;">执行结果</span>。</p>
<p>2<span style="color: #ff0000;"><span style="color: #000000;">.</span>终止函数的执行</span>。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">&nbsp;</span><br>2.  <span class="kwd">function</span><span class="pln"> test </span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>3.  <span class="pln">&nbsp; &nbsp;console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">a </span><span class="pun">+</span><span class="pln"> b</span><span class="pun">);</span><br>4.  <span class="pln">&nbsp; &nbsp;</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">;</span><br>5.  <span class="pln">&nbsp; &nbsp;console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">‘hello’</span><span class="pun">);</span><br>6.  <span class="pun">}</span><br>7.  <span class="pln">test</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 3 没有打印hello</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a><span style="color: #ff0000;">作用域</span></h3><p>定义：变量（变量作用域又称为上下文）和函数生效（能被访问）的区域。</p>
<p><strong><span style="color: #ff0000;">javascript的函数，是可以产生作用域的</span></strong>！！</p>
<p>es5中的作用域大概只有全局作用域和函数作用域两种，es6中新添加了块级作用域。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">&nbsp;</span><br>2.  <span class="kwd">var</span><span class="pln"> demo </span><span class="pun">=</span><span class="pln"> </span><span class="lit">123</span><span class="pun">;</span><span class="pln"> </span><span class="com">//全局变量</span><br>3.  <span class="kwd">function</span><span class="pln"> test </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>4.  <span class="pln">&nbsp;  </span><span class="kwd">var</span><span class="pln"> demo </span><span class="pun">=</span><span class="pln"> </span><span class="lit">234</span><span class="pun">;</span><span class="com">// 局部变量</span><br>5.  <span class="pln">&nbsp;  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">demo</span><span class="pun">);</span><br>6.  <span class="pln">&nbsp;  </span><span class="kwd">var</span><span class="pln"> demo1 </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘hello’</span><span class="pun">;</span><br>7.  <span class="pun">}</span><br>8.  <span class="pln">test</span><span class="pun">();</span><span class="com">//234 &nbsp;就近打印局部变量，没有局部变量的时候才会打印全局的。</span><br>9.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">demo1</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 报错 我们的全局作用域无法访问函数的局部作用域</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这个函数作用域就好像一个屋子，我们在屋子里面能够用屋子外面的东西，但是外面却不能闯进屋子里面使用屋子里面的东西。</p>
<p>• 有一点要注意的是，如果在函数作用域里面声明变量没有用var的话，那么就声明了一个全局变量。</p>
<p>• 同时，两个不同作用域（除了全局作用域）之间是不能互相访问的。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">&nbsp;</span><br>2.  <span class="kwd">function</span><span class="pln"> demo1 </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> str1 </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘abc’</span><span class="pun">;</span><br>4.  <span class="pun">}</span><br>5.  <span class="kwd">function</span><span class="pln"> demo2 </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">str1</span><span class="pun">);</span><br>7.  <span class="pun">}</span><br>8.  <span class="pln">demo2</span><span class="pun">();</span><span class="pln"> </span><span class="com">// 报错</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<h3 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a><span style="color: #ff0000;">作用域链</span></h3><p>既然函数存在函数作用域，函数又可以嵌套，那么作用域之间自然就会产生嵌套关系，这个时候就产生了作用域链。</p>
<p>当代码在一个环境中执行时，会创建变量对象的一个作用域链（scope chain）来保证对执行环境<span style="color: #ff0000;"><strong>有权</strong></span>访问的变量和函数的<span style="color: #ff0000;"><strong>有序</strong></span>访问。作用域第一个对象始终是当前执行代码所在环境的变量对象。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">&nbsp;</span><br>2.  <span class="kwd">function</span><span class="pln"> demo </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>3.  <span class="pln">    </span><span class="kwd">var</span><span class="pln"> demo_a </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><br>4.  <span class="pln">    </span><span class="kwd">function</span><span class="pln"> test </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>5.  <span class="pln">        </span><span class="kwd">var</span><span class="pln"> demo_a </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><br>6.  <span class="pln">        console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">demo_a</span><span class="pun">);</span><br>7.  <span class="pln">    </span><span class="pun">}</span><br>8.  <span class="pln">    test</span><span class="pun">();</span><br>9.  <span class="pun">}</span><br>10.  <span class="pln">demo</span><span class="pun">();</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p><span style="color: #000000;">在这个例子中，demo1运行的时候，首先创建了一个demo的作用域，但是window本身还有一个全局作用域，这就让demo产生了一个作用域链。本着对执行环境的有权和有序访问，每个函数的自身的作用域总是在作用域链的最顶层，下一层是这个函数的父级函数的作用域，再下面是父级的父级的作用域，直到全局作用域。</span></p>
<p>因此这个例子中的test函数执行时候打印的demo_a是它本身的作用域中的demo_a，而不是demo函数作用域下的demo_a，如果test函数作用域中没有demo_a这个变量的话，系统才会沿着作用域链向下找到demo作用域中的demo_a变量。</p>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a><span style="color: #ff0000;">闭包</span></h3><p>闭包是一个非常非常重要的知识点，我在网上看到过许多的定义，但是都有点繁琐，这里的知识点是我简单化的总结的。</p>
<p>什么是闭包？</p>
<p>我的理解是，<strong><span style="color: #ff0000;">闭包就是能够读取其他函数内部变量的函数</span></strong>。</p>
<p>我们前面提到过，不同作用域之间不能够互相访问，但是我们如果在一个<span style="color: #ff0000;">函数内部再定义一个函数</span>，并且这个<span style="color: #ff0000;">内部函数与外部函数的变量有关联</span>，那么我们就可以通过<span style="color: #ff0000;">返回这个内部的函数</span>，然后<span style="color: #ff0000;">来访问外部函数里面的变量</span>。</p>
<p>所以，在本质上，闭包就是将函数内部和函数外部连接起来的一座桥梁。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">&nbsp;</span><br>2.  <span class="kwd">function</span><span class="pln"> a </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> demo1 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">123</span><span class="pun">;</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; add </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; demo1</span><span class="pun">++;</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>7.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>8.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">demo1</span><span class="pun">);</span><br>9.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">};</span><br>10.  <span class="pun">}</span><br>11.  <span class="kwd">var</span><span class="pln"> demo </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">();</span><br>12.  <span class="pln">demo</span><span class="pun">();</span><span class="pln"> </span><span class="com">// 123</span><br>13.  <span class="pln">add</span><span class="pun">();</span><br>14.  <span class="pln">demo</span><span class="pun">();</span><span class="pln"> </span><span class="com">// 124</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>当函数执行完之后，函数的执行上下文就会被销毁，自然我们就无法访问里面的变量了，但是我们这个函数返回了一个<span style="color: #ff0000;">依赖于这个函数的新函数，也就是说这个没有被销毁的新函数的作用域链中还存在着对原本函数的作用域的引用</span>，就导致我们原本的函数的上下文不会被销毁，我们<span style="color: #ff0000;">称返回的这个新函数是原本函数的闭包函数</span>。</p>
<p>在上面的例子中，a函数内部有一个全局的函数add和一个局部变量demo1，我们这个把返回函数给了一个全局变量demo进入到了内存中，但是由于这个返回的新函数依赖于本来的a函数，这就导致本来的a函数的上下文不会被销毁。</p>
<p>这里我们的打印函数一共运行了两次，都能打印出来值，说明a函数的demo1变量在函数执行完之后并没有被销毁而是存到了内存中。</p>
<p>其次，add的值是一个匿名函数，而这个匿名函数本身也是一个闭包，所以add相当于是一个setter叠加器，可以在函数外部对函数内部的局部变量进行操作。</p>
<p><strong><span style="color: #ff0000;">使用闭包的注意点</span></strong></p>
<p>1.由于闭包会使得函数中的变量都被保存在内存中，<span style="color: #ff0000;">内存消耗很大</span>，所以不能滥用闭包，否则会造成网页的性能问题，在IE中可能导致<span style="color: #ff0000;">内存泄露</span>。</p>
<p>解决方法是，<span style="color: #ff0000;">在退出函数之前，将不使用的局部变量全部删除</span>。</p>
<p>2.闭包会在父函数外部，改变父函数内部变量的值。所以，如果你把<span style="color: #ff0000;">父函数当作对象</span>使用，把<span style="color: #ff0000;">闭包当作它的公用方法</span>，把<span style="color: #ff0000;">内部变量当作它的私有属性</span>，这时一定要小心，<strong><span style="color: #ff0000;">不要随便改变父函数内部变量的值</span></strong>。</p>
<p>这里我们再总结一下什么是闭包：</p>
<p>当<span style="color: #ff0000;">内部函数</span>在定义它的作用域的<span style="color: #ff0000;">外部被引用</span>时,就<span style="color: #ff0000;">创建了该内部函数的闭包</span> ,如果<span style="color: #ff0000;">内部函数引用了位于外部函数的变量</span>,当外部函数调用完毕后,这些变量在内存不会被释放,因为闭包需要它们。</p>
<p>当我们能理解下面这个代码的时候，差不多就理解了闭包了：</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">&nbsp;</span><br>2.  <span class="kwd">var</span><span class="pln"> name </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘global’</span><span class="pun">;</span><br>3.  <span class="kwd">var</span><span class="pln"> obj </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; name</span><span class="pun">:</span><span class="pln"> </span><span class="str">‘obj’</span><span class="pun">,</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; getName</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>7.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name</span><span class="pun">);</span><br>8.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>9.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>10.  <span class="pun">}</span><br>11.  <span class="pln">obj</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">()();</span><span class="pln"> </span><span class="com">// global </span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>累加器的例子：</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">&nbsp;</span><br>2.  <span class="kwd">function</span><span class="pln"> a </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="kwd">var</span><span class="pln"> num </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">function</span><span class="pln"> addNum </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num</span><span class="pun">++;</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">num</span><span class="pun">);</span><br>7.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>8.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> addNum</span><span class="pun">;</span><br>9.  <span class="pun">}</span><br>10.  <span class="kwd">var</span><span class="pln"> demo </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">();</span><br>11.  <span class="pln">demo</span><span class="pun">();</span><span class="pln"> </span><span class="com">// 2</span><br>12.  <span class="pln">demo</span><span class="pun">();</span><span class="pln"> </span><span class="com">// 3</span><br>13.  <span class="kwd">var</span><span class="pln"> demo1 </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">();</span><br>14.  <span class="pln">demo1</span><span class="pun">();</span><span class="pln"> </span><span class="com">// 2</span><br>15.  <span class="pln">demo1</span><span class="pun">();</span><span class="pln"> </span><span class="com">// 3</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<h3 id="立即执行函数"><a href="#立即执行函数" class="headerlink" title="立即执行函数"></a><span style="color: #ff0000;">立即执行函数</span></h3><p>立即执行函数是解闭包的一个重要方法。但是注意<span style="color: #ff0000;">闭包是没有办法解除的</span>，我们只能通过另一个新闭包来消除上一个闭包的影响。</p>
<p>定义：立即执行函数不需要被定义，直接执行，执行完毕之后直接释放。</p>
<p>经常被用作初始化。</p>
<p>立即执行函数的写法：</p>
<p>1.<span style="color: #ff0000;">(function (a) {})(num);</span></p>
<p>2.<strong><span style="color: #ff0000;">(function (a) {} (num))</span></strong></p>
<p>传递的参数是a，a的实参值是num，num是我们在外面定义的变量。</p>
<p>这两种写法功能完全一样，但是标准一点的写法是第二种。</p>
<p>• 这里有一个小知识点：<span style="color: #ff0000;">函数声明不能被执行，但是函数表达式可以被执行</span>。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">&nbsp;</span><br>2.  <span class="kwd">function</span><span class="pln"> test</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span><span class="pln"> </span><span class="pun">();</span><span class="com">// 错误</span><br>3.  <span class="kwd">var</span><span class="pln"> test </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span><span class="pln"> </span><span class="pun">();</span><span class="com">// 这个是可以被执行的</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>第一种加一个括号变成立即执行函数就可以执行了。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">&nbsp;</span><br>2.  <span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span><span class="pln"> </span><span class="pun">());</span><span class="pln"> &nbsp;</span><span class="com">// 正确</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>因为这种写法不是函数声明，所以不需要函数名字，因此就成为了立即执行函数。</p>
<p><strong><span style="color: #ff0000;">立即执行函数的应用</span></strong></p>
<p>现在我们有一个要求：我们现在有一个函数returnB，这个函数内部有一个数组arr，这个arr每一个值存的是一个函数并且函数的作用是输出相对应的数组下标值。</p>
<p>我们一开始的写法可能是这个样子的：</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">&nbsp;</span><br>2.  <span class="kwd">function</span><span class="pln"> returnB</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> arr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[];</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">10</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">i</span><span class="pun">);</span><br>7.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>8.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>9.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> arr</span><span class="pun">;</span><br>10.  <span class="pun">}</span><br>11.  <span class="kwd">var</span><span class="pln"> save </span><span class="pun">=</span><span class="pln"> returnB</span><span class="pun">();</span><br>12.  <span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">10</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><br>13.  <span class="pln">&nbsp; &nbsp; &nbsp; save</span><span class="pun"><a href=""></a></span><span class="pln">i</span><span class="pun">;</span><br>14.  <span class="pun">}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>但是最后会输出10个10，并不是我们所想的0-9。</p>
<p>这是因为我们打印i的这一行代码所在的函数的自身作用域中不存在i这个变量，而在它的父级函数returnB中才有i这个变量，这个打印函数是一个闭包函数，而且这arr[0]-arr[9]这10个值都是这一个闭包函数。因此当for循环执行完i变成10之后，我们开始后面的依次触发每一个save[i]函数的时候，函数寻找的i是作用域链中的第二层作用域，也就是父级函数returnB的作用域，而在这个作用域中的i都已经变成10了。</p>
<p>这个时候10个打印函数都<span style="color: #ff0000;">共用一个i值</span>。</p>
<p>那么如何更改可以让它输出0-9呢？这里就需要利用我们的立即执行函数来产生新的闭包以<span style="color: #ff0000;">消除我们共用一个闭包值</span>导致的问题。（注意不是消除闭包）</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">&nbsp;</span><br>2.  <span class="kwd">function</span><span class="pln"> returnB</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> arr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[];</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">10</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">n</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;arr</span><span class="pun">[</span><span class="pln">n</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>7.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">n</span><span class="pun">)</span><br>8.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">};</span><br>9.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}(</span><span class="pln">i</span><span class="pun">))</span><br>10.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><br>11.  <span class="kwd">return</span><span class="pln"> arr</span><span class="pun">;</span><br>12.  <span class="pun">}</span><br>13.  <span class="kwd">var</span><span class="pln"> save </span><span class="pun">=</span><span class="pln"> returnB</span><span class="pun">();</span><br>14.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">save</span><span class="pun">);</span><br>15.  <span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> save</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><br>16.  <span class="pln">&nbsp; &nbsp; &nbsp; save</span><span class="pun"><a href=""></a></span><span class="pln">i</span><span class="pun">;</span><br>17.  <span class="pun">}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>我们立即执行函数执行之后，会产生一个新的作用域，我们把i的具体的0-9这10个数分别作为参数传了进去，也就是说每一个作用域里面的的n都是不一样的。里层的打印函数因为没有n值，所以要向上找立即执行函数的作用域里面的n值。这样最后就会产生10个闭包，因为每一个立即执行函数都是一个新作用域。每一个闭包都是利用刚才立即执行函数的变量n，而每一个立即执行函数的变量n都是不同的，这样就解决了刚才共用闭包导致都打印10的问题了。</p>
<p>今天的闭包和立即执行函数其实很重要的哟~希望对大家能有所帮助！</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/02/JavaScriptFive/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/02/JavaScriptFive/" itemprop="url">Web前端的知识之旅哟——原型与原型链</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-02T16:09:12+08:00">
                2018-01-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="原型"><a href="#原型" class="headerlink" title="原型"></a><span style="color: #ff0000;">原型</span></h3><p>1.<strong><span style="color: #ff0000;">原型的定义</span></strong>：原型是function对象的一个<span style="color: #ff0000;">属性</span>，它定义了构造函数制造出来的对象的<span style="color: #ff0000;">公共祖先</span>。通过该构造函数产生的对象，可<span style="color: #ff0000;">以继承该原型的属性和方法</span>。<strong><span style="color: #ff0000;">原型也是对象</span></strong>。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">&nbsp;</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>我们先定义一个构造函数，Person.prototype这个属性就是这个构造函数的原型，这个属性是<span style="color: #ff0000;">天生就有</span>的，并且这个属性的值也是一个对象。</p>
<p>我们可以在prototype上面添加属性和方法，每一个构造出来的对象都可以继承这些属性和方法。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="typ">Person</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘scarlett’</span><span class="pun">;</span><br>2.  <span class="typ">Person</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">age </span><span class="pun">=</span><span class="pln"> </span><span class="lit">17</span><span class="pun">;</span><br>3.  <span class="kwd">var</span><span class="pln"> oPerson </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">();</span><br>4.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">oPerson</span><span class="pun">.</span><span class="pln">name</span><span class="pun">);</span><span class="pln"> </span><span class="com">// scarlett</span><br>5.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">oPerson</span><span class="pun">.</span><span class="pln">age</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 17</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>虽然每一个对象都是独立的，但是他们都有共同的祖先，当我们访问这个对象的属性的时候，<span style="color: #ff0000;">如果它没有这个属性，就会向上找到它的原型，然后在原型上访问这个属性</span>。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="typ">Person</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">money </span><span class="pun">=</span><span class="pln"> </span><span class="lit">100</span><span class="pun">;</span><br>3.  <span class="pun">}</span><br>4.  <span class="typ">Person</span><span class="pun">.</span><span class="pln">prototype </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; money</span><span class="pun">:</span><span class="pln"> </span><span class="lit">200</span><span class="pun">;</span><br>6.  <span class="pun">}</span><br>7.  <span class="kwd">var</span><span class="pln"> oPerson </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">();</span><br>8.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">oPerson</span><span class="pun">.</span><span class="pln">money</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 100</span><br>9.  <span class="kwd">delete</span><span class="pln"> oPerson</span><span class="pun">.</span><span class="pln">money</span><span class="pun">;</span><br>10.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">oPerson</span><span class="pun">.</span><span class="pln">money</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 200</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这里我们oPerson对象因为自身有一个money属性，所以就不会到原型上去寻找money属性，而是查询自身的money属性，因此打印的是100，但是当我们删除了自身的money属性之后，它就会到原型上去寻找money这个属性，因此就打印200。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">oPerson</span><span class="pun">.</span><span class="pln">money&nbsp;</span><span class="pun">=</span><span class="pln"> </span><span class="lit">1000</span><span class="pun">;</span><br>2.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">oPerson</span><span class="pun">.</span><span class="pln">money</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 1000</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>当我们再次给对象添加属性之后，打印money属性就是自身的属性。</p>
<p>2.<strong><span style="color: #ff0000;">利用原型特点和概念，可以提取公有属性</span></strong>。</p>
<p>我们可以把每一个对象都有的公有属性不写在构造函数里面，而是提取到原型上，这样当我们用构造函数构造大量的对象的时候就<span style="color: #ff0000;">不需要走多次构造函数里面的赋值语句了，而只需要走一遍</span>，每一个对象调用属性的时候直接上原型上查找就可以了。</p>
<p>3.<strong><span style="color: #ff0000;">对象如何查看原型</span></strong></p>
<p>前面我们提到了构造函数可以通过.prototype的方法来查看构造函数的原型，那么我们怎么查看对象的原型呢？</p>
<p>我们前面提到过用构造函数构造对象的时候，会隐式创建一个this对象，这个this对象里面有一个默认的属性叫做<strong><span style="color: #ff0000;"><strong>proto</strong>属性</span></strong>，这个属性的值就是指向的这个对象的原型。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> </span><span class="kwd">this</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="com">// xxx</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; __proto</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">;</span><span class="pln"> </span><span class="com">// 刚才Person构造函数的例子</span><br>4.  <span class="pun">}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>当查找的属性是自身没有的属性的时候，就会先查找proto这个属性，然后这个属性指向了原型，所以就到原型上面继续查找属性了。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="typ">Person</span><span class="pun">.</span><span class="pln">prototype </span><span class="pun">=</span><span class="pln"> </span><span class="lit">100</span><span class="pun">;</span><br>2.  <span class="pln">oPerson</span><span class="pun">.</span><span class="pln"><strong>proto</strong></span><span class="pun">.</span><span class="pln">money </span><span class="com">// 100</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>注意：<strong><span style="color: #ff0000;">prototype是函数的属性，<strong>proto</strong>是对象的属性</span></strong>。</p>
<p>4.<strong><span style="color: #ff0000;">对象如何查看构造自身的构造函数</span></strong></p>
<p>在prototype里面，有一个隐式的属性叫做<strong><span style="color: #ff0000;">constructor</span></strong>，这个属性记录的就是<strong><span style="color: #ff0000;">对象的构造器</span></strong>，里面存的就是构造函数。</p>
<p>console.log(oPerson.constructor); // Person();</p>
<h3 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a><span style="color: #ff0000;">原型链</span></h3><p>有了原型，原型还是一个对象，那么这个名为原型的对象自然还有自己的原型，这样的原型上还有原型的结构就构成了原型链。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="typ">Gra</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">firstName </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘scarlett’</span><span class="pun">;</span><br>2.  <span class="kwd">function</span><span class="pln"> </span><span class="typ">Gra</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘grandfather’</span><span class="pun">;</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">sex </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘male’</span><span class="pun">;</span><br>5.  <span class="pun">}</span><br>6.  <span class="kwd">var</span><span class="pln"> grandfoo </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Gra</span><span class="pun">();</span><br>7.  <span class="pln">grandfoo</span><span class="pun">.</span><span class="pln">word </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘hello’</span><br>8.  <span class="typ">Foo</span><span class="pun">.</span><span class="pln">prototype </span><span class="pun">=</span><span class="pln"> grandfoo</span><span class="pun">;</span><br>9.  <span class="kwd">function</span><span class="pln"> </span><span class="typ">Foo</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>10.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">age </span><span class="pun">=</span><span class="pln"> </span><span class="lit">18</span><span class="pun">;</span><br>11.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">money </span><span class="pun">=</span><span class="pln"> </span><span class="lit">100</span><span class="pun">;</span><br>12.  <span class="pun">}</span><br>13.  <span class="kwd">var</span><span class="pln"> father </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Foo</span><span class="pun">();</span><br>14.  <span class="kwd">function</span><span class="pln"> </span><span class="typ">Son</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>15.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘son’</span><span class="pun">;</span><br>16.  <span class="pun">}</span><br>17.  <span class="typ">Son</span><span class="pun">.</span><span class="pln">prototype </span><span class="pun">=</span><span class="pln"> father</span><span class="pun">;</span><br>18.  <span class="kwd">var</span><span class="pln"> son </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Son</span><span class="pun">();</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>Foo创造出来的每一个对象都继承自grandfoo这个对象，son的每一个对象都继承自father这个由Foo创造出来的对象，这样son就可以继承上面Foo和Gra的所有属性。</p>
<p>当我们查找son上的属性的时候，如果son自身有属性，那么就打印出来，如果没有，就向上查找原型father，如果father上面还有这个属性，那么继续向上查找grandfoo，如果有就输出，如果没有就返回undefined。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">son</span><span class="pun">.</span><span class="pln">name</span><span class="pun">)</span><span class="pln"> </span><span class="com">// son</span><br>2.  <span class="pln">son</span><span class="pun">.</span><span class="pln">money </span><span class="com">//100</span><br>3.  <span class="pln">son</span><span class="pun">.</span><span class="pln">age</span><span class="com">// 18</span><br>4.  <span class="pln">son</span><span class="pun">.</span><span class="pln">sex </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘male’</span><span class="pun">;</span><br>5.  <span class="pln">son</span><span class="pun">.</span><span class="pln">firstName </span><span class="com">// scarlett</span><br>6.  <span class="pln">son</span><span class="pun">.</span><span class="pln">word </span><span class="com">// hello;</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这种链式的查询结构就叫做原型链。</p>
<p>那么原型链有没有终点？我们写的Gra是不是这个原型链的终点？</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="typ">Gra</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">);</span><span class="pln"> </span><span class="com">// Object{‘name’: ‘scarlett’}</span><br>2.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="typ">Gra</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln"><strong>proto</strong></span><span class="pun">);</span><span class="pln"> </span><span class="com">//Object{}</span><br>3.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="typ">Gra</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln"><strong>proto</strong></span><span class="pun">.</span><span class="pln"><strong>proto</strong></span><span class="pun">);</span><span class="pln"> </span><span class="com">// null</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>有测试可以看出，其实我们的Gra.prototype上面还有原型，这个原型是一个空对象，这个空对象上面就没有了。</p>
<p>其实，<span style="color: #ff0000;">绝大部分的对象最终都会继承自<strong>Object.prototype</strong>这个对象</span>。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> obj </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{};</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p><span style="color: #ff0000;">我们没有规定原型的对象，它们的原型就是<strong>Object.prototype</strong></span>。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> obj </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">();</span><br>2.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">.</span><span class="pln"><strong>proto</strong></span><span class="pun">);</span><span class="pln"> </span><span class="com">// Object{}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>由此可见，原型链的终点一般是Object.prototype;</p>
<p>但是<strong><span style="color: #ff0000;">并不是所有的对象都有原型</span></strong>。</p>
<p>我们上一篇提到过第三种构造对象的方法，使用Object.create方法。</p>
<p>Object.create()方法需要写一个参数，这个参数就是我们这个对象的<span style="color: #ff0000;">原型</span>。如果我们想要构造和var obj = {};一样的空对象，那么就需要写：</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> obj </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">.</span><span class="pln">create</span><span class="pun">(</span><span class="typ">Object</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">);</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>当然，我们也可以写一个自定义的属性，让它成为原型。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> obj </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">.</span><span class="pln">create</span><span class="pun">({</span><span class="pln">name</span><span class="pun">:</span><span class="pln"> </span><span class="str">‘scarett’</span><span class="pun">);</span><br>2.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">.</span><span class="pln">name</span><span class="pun">);</span><span class="pln"> </span><span class="com">//scarlett</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>但是，当我们<strong><span style="color: #ff0000;">写参数为null</span></strong>的时候，我们就构造出来了一个<span style="color: #ff0000;"><strong>没有原型</strong>的对象</span>。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> obj </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">.</span><span class="pln">create</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">);</span><br>2.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">.</span><span class="pln"><strong>proto</strong></span><span class="pun">);</span><span class="pln"> </span><span class="com">// undefined</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p><span style="color: #ff0000;">undefined null也都没有原型</span>。它们之所以能打印出来，是因为不调用任何方法的，直接打印出来。</p>
<h3 id="原型链上属性的增删改查"><a href="#原型链上属性的增删改查" class="headerlink" title="原型链上属性的增删改查"></a><span style="color: #ff0000;">原型链上属性的增删改查</span></h3><p>其实我们前面一直在使用着这些方法，这里说一下原型上的引用值。当我们通过一个对象改变了原型上的<strong><span style="color: #ff0000;">引用值类型</span></strong>的属性的话，那么所有对象的这个属性的值都会随之更改。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="typ">Person</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">arr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">];</span><br>2.  <span class="kwd">var</span><span class="pln"> person1 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">();</span><br>3.  <span class="kwd">var</span><span class="pln"> person2 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">();</span><br>4.  <span class="pln">person1</span><span class="pun">.</span><span class="pln">arr</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="lit">4</span><span class="pun">);</span><br>5.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">person2</span><span class="pun">.</span><span class="pln">arr</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 1 2 3 4</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p><strong><span style="color: #ff0000;">删除</span></strong></p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="typ">Person</span><span class="pun">.</span><span class="pln">ptototype</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘father’</span><span class="pun">;</span><br>2.  <span class="typ">Person</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘son’</span><span class="pun">;</span><br>4.  <span class="pun">}</span><br>5.  <span class="kwd">delete</span><span class="pln"> person</span><span class="pun">.</span><span class="pln">name</span><span class="pun">;</span><br>6.  <span class="pln">person</span><span class="pun">.</span><span class="pln">name</span><span class="com">// father</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这个时候person对象上面没有了name属性，那么依据我们前面说的当自身没有这个属性的时候就会向原型查询这个属性的说法，我们再次删除这个属性是不是就可以删除原型上的属性了？</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">delete</span><span class="pln"> person</span><span class="pun">.</span><span class="pln">name</span><span class="pun">;</span><br>2.  <span class="pln">person</span><span class="pun">.</span><span class="pln">name </span><span class="com">// father</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>然而事实并没有，由此可见，<strong><span style="color: #ff0000;">对象并不能删除原型上的属性</span></strong>。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="typ">Person</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘scarlett’</span><span class="pun">;</span><br>2.  <span class="typ">Person</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">sayName </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name</span><span class="pun">);</span><br>4.  <span class="pun">}</span><br>5.  <span class="kwd">function</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘son’</span><span class="pun">;</span><br>7.  <span class="pun">}</span><br>8.  <span class="kwd">var</span><span class="pln"> oPerson </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">();</span><br>9.  <span class="pln">oPerson</span><span class="pun">.</span><span class="pln">sayName</span><span class="pun">();</span><span class="com">// son</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这里提一下这个this的指向。<strong><span style="color: #ff0000;">谁调用这个方法，这个方法中的this就指向这个调用它的对象</span></strong>。</p>
<p>所以这里的this指向的是oPerson这个对象，这个对象的name属性值是son。</p>
<p>那么今天的知识点就介绍到这里哟~</p>
<p>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/02/JavaScriptFour/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/02/JavaScriptFour/" itemprop="url">Web前端的知识之旅哟——对象与构造函数与包装类</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-02T16:09:06+08:00">
                2018-01-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我们前面已经接触过对象这一种数据，这一篇着重介绍一下对象的有关知识哟~</p>
<h3 id="对象创建方法"><a href="#对象创建方法" class="headerlink" title="对象创建方法"></a><span style="color: #ff0000;">对象创建方法</span></h3><p>对象的创建方法有三种：</p>
<p>1.<strong><span style="color: #ff0000;">对象字面量</span></strong></p>
<p>我们前面的对象创建方法都是使用的字面量的方法创建的。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> obj </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{};</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这样的方式就叫做字面量，也是我们<span style="color: #ff0000;">创建对象最简单最常用</span>的方法。</p>
<p>对象里面有属性，属性之间用逗号分隔，每一条属性都有属性名和属性值，属性名和属性值之间用分号分隔。</p>
<p>2.<strong><span style="color: #ff0000;">构造函数</span></strong></p>
<p>构造函数也分两种：<span style="color: #ff0000;">系统自带的构造函数</span>和我们<span style="color: #ff0000;">自定义的构造函数</span>。</p>
<p>•<span style="color: #ff0000;"> 系统自带的构造函数</span></p>
<p>创建对象的构造函数是Object()。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> obj </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">();</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>通过这条语句，我们就创建了一个空对象。</p>
<p>它的作用和var obj = {};的作用是一样的。</p>
<p>系统自带的构造函数还有很多，比如Number()、String()、Boolean()、Array()这些都是构造函数。</p>
<p>• <span style="color: #ff0000;">自定义构造函数</span></p>
<p>自定义的构造函数是我们平时<span style="color: #ff0000;">最常用的一种构造函数<span style="color: #000000;">。</span></span></p>
<p>构造函数也是正常的函数，我们为了区分它和别的正常函数，把构造函数的首字母大写。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>上面就声明了一个构造函数Person。</p>
<p>有了构造函数之后，我们就可以用new操作符来创建对象了。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> oPerson </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">();</span><br>2.  <span class="kwd">typeof</span><span class="pln"> oPerson</span><span class="pun">;</span><span class="pln"> </span><span class="com">// object</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这样我们也创建了一个对象oPerson，不过现在这个对象是空对象，因为我们的构造函数什么都没有写，我们也没有给这个对象添加任何属性。</p>
<p>另外，用new操作符创建出来的对象，尽管都是使用的同一个构造函数，但是之间是没有关联的。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> person1 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">();</span><br>2.  <span class="kwd">var</span><span class="pln"> person2 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">();</span><br>3.  <span class="pln">person1</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘111’</span><span class="pun">;</span><br>4.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">person2</span><span class="pun">.</span><span class="pln">name</span><span class="pun">);</span><span class="pln"> </span><span class="com">// undefined</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>person1 和 person2 之间没有关系，它们两个是单独的对象。</p>
<p>我们可以在构造函数里面写一些对象天生就有的默认属性。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘scarlett’</span><span class="pun">,</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">age </span><span class="pun">=</span><span class="pln"> </span><span class="lit">17</span><br>4.  <span class="pun">}</span><br>5.  <span class="kwd">var</span><span class="pln"> person </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">();</span><br>6.  <span class="pln">person</span><span class="pun">.</span><span class="pln">name</span><span class="pun">;</span><span class="pln"> </span><span class="com">// scarlett</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>当然构造函数既然是函数，那么就可以传参数。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">(</span><span class="pln">name</span><span class="pun">,</span><span class="pln"> age</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> name</span><span class="pun">;</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">age </span><span class="pun">=</span><span class="pln"> age</span><span class="pun">;</span><br>4.  <span class="pun">}</span><br>5.  <span class="kwd">var</span><span class="pln"> person </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">(</span><span class="str">‘scarlett’</span><span class="pun">,</span><span class="pln"> </span><span class="lit">18</span><span class="pun">);</span><br>6.  <span class="pln">person</span><span class="pun">.</span><span class="pln">age</span><span class="pun">;</span><span class="pln"> </span><span class="com">// 18</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>创建对象的时候，<span style="color: #ff0000;">只有new才会有this</span>。</p>
<p>这里有一个重点，<strong><span style="color: #ff0000;">为什么我们通过new操作符可以创建互相独立的对象呢</span></strong>？</p>
<p>其实，当我们用new操作符的时候，这个new在我们的构造函数里面隐式创建了一个this对象，并且最后返回了这个this对象，这也就是为什么我们通过new可以最后创建一个对象的原因了。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">(</span><span class="pln">name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="com">//var this = {};</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> name</span><span class="pun">;</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="com">//return this;</span><br>5.  <span class="pun">}</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>如果我们在构造函数首行手动创建一个对象，比如that对象，然后最后返回了that，那么里面的this就没有用了，我么要为属性赋值就要用that了。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">(</span><span class="pln">name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> that </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; name</span><span class="pun">:</span><span class="pln"> </span><span class="str">‘scarlett’</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="pun">};</span><span class="pln">&nbsp;</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; that</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> name</span><span class="pun">;</span><br>6.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> that</span><span class="pun">;</span><br>7.  <span class="pun">}</span><br>8.  <span class="kwd">var</span><span class="pln"> person </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="str">‘demo’</span><span class="pun">);</span><br>9.  <span class="pln">person</span><span class="pun">.</span><span class="pln">name</span><span class="pun">;</span><span class="pln"> </span><span class="com">// demo</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这样默认的name值就是scarlett。</p>
<p><span style="color: #ff0000;"><strong>重点</strong>：如果我们最后返回的<strong>对象</strong>，那么this就<strong>失效</strong>，但是如果最后显示返回的是<strong>原始值</strong>，那么this还是<strong>有效</strong>的</span>。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">function</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">var</span><span class="pln"> that </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{};</span><br>3.  <span class="pln">&nbsp; &nbsp; &nbsp; that</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘that’</span><span class="pun">;</span><br>4.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘this’</span><span class="pun">;</span><br>5.  <span class="pln">&nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">123</span><span class="pun">;</span><br>6.  <span class="pun">}</span><br>7.  <span class="kwd">var</span><span class="pln"> person </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">();</span><br>8.  <span class="pln">person</span><span class="pun">.</span><span class="pln">name</span><span class="pun">;</span><span class="pln"> </span><span class="com">// this</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>3.<strong><span style="color: #ff0000;">Object.create(原型)</span></strong></p>
<p>这种方法涉及到原型的知识点了，我们放在后面介绍原型的时候再介绍。</p>
<h3 id="属性的增删改查"><a href="#属性的增删改查" class="headerlink" title="属性的增删改查"></a><span style="color: #ff0000;">属性的增删改查</span></h3><p>其实属性的修改我们前面也都接触过了。</p>
<p>1.<strong><span style="color: #ff0000;">增</span></strong></p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> obj </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{};</span><br>2.  <span class="pln">obj</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘scarlett’</span><span class="pun">;</span><br>3.  <span class="pln">obj</span><span class="pun">.</span><span class="pln">name</span><span class="pun">;</span><span class="pln"> </span><span class="com">// scarlett</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>我们可以通过对象名+点+属性名的方法来给对象添加新的属性并且赋值。</p>
<p>这个时候如果我们调用obj.age属性的话，这个属性并不存在，但是obj这个对象是存在的，因此浏览器不会报错，只会打印undefined。</p>
<p>2.<strong><span style="color: #ff0000;">改</span></strong></p>
<p>修改的操作和增加的操作其实是一样的，只要调用相同的属性名然后赋一个新的值就可以了。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> obj </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; name</span><span class="pun">:</span><span class="pln"> </span><span class="str">‘scarlett’</span><br>3.  <span class="pun">}</span><br>4.  <span class="pln">obj</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘demo’</span><span class="pun">;</span><br>5.  <span class="pln">obj</span><span class="pun">.</span><span class="pln">name</span><span class="pun">;</span><span class="pln"> </span><span class="com">// demo</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>3.<strong><span style="color: #ff0000;">查</span></strong></p>
<p>其实我们前面一直都在使用查看属性的功能…</p>
<p>obj.name = ‘demo’;</p>
<p>console.log(obj.name);//demo</p>
<p>这就是查看属性的方法。</p>
<p>4.<strong><span style="color: #ff0000;">删</span></strong></p>
<p>删除属性的操作我们需要借助<strong><span style="color: #ff0000;">delete</span></strong>操作符，这个操作符的作用就是来删除属性的。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> obj </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br>2.  <span class="pln">&nbsp; &nbsp; &nbsp; name</span><span class="pun">:</span><span class="pln"> </span><span class="str">‘’</span><span class="pln">scarlett</span><span class="str">‘</span><br>3.  <span class="str">}</span><br>4.  <span class="str">obj.name; // scarlett</span><br>5.  <span class="str">delete obj.name;</span><br>6.  <span class="str">obj.name; // undefined</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<h3 id="包装类"><a href="#包装类" class="headerlink" title="包装类"></a><span style="color: #ff0000;">包装类</span></h3><p>我们前面提到过，原始值是不可以改变的，只有对象才有属性和方法，那么这个又是个什么东西？</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> str </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘abcd’</span><span class="pun">;</span><br>2.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">str</span><span class="pun">.</span><span class="pln">length</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 4</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>按理说这个字符串原始值是没有属性的，但是这里确实可以查看length这个属性。</p>
<p>这里就涉及到一个叫做包装类的东西了。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="pln">str</span><span class="pun">.</span><span class="pln">length</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>我们在调用执行这一行代码之前，程序会自动把str包装成一个<span style="color: #ff0000;">字符串对象</span>，在这一行代码执行完毕之后再<strong><span style="color: #ff0000;">销毁</span></strong>这个字符串对象。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> str </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘abcd’</span><span class="pun">;</span><br>2.  <span class="com">// var str1 = new String(‘abcd’);</span><br>3.  <span class="pln">str</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><span class="pln"> </span><span class="com">// str1.length</span><br>4.  <span class="com">// 消除str1</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>这里的str.length的str其实是上一句的包装好的str1，str1是对象，上面有属性和方法，然后就可以打印length属性了，在执行完str.length这行代码之后，str1这个对象就被销毁了。</p>
<p>这也就是为什么我们在执行str.length = 2;这句话之后，再打印str.length;还是4的原因了。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> str </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘abcd’</span><span class="pun">;</span><br>2.  <span class="com">// var str1 = String(‘abcd’);</span><br>3.  <span class="pln">str</span><span class="pun">.</span><span class="pln">length </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln"> </span><span class="com">// str1.length = 2;</span><br>4.  <span class="com">//销毁str1</span><br>5.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">str</span><span class="pun">);</span><span class="pln"> </span><span class="com">// abcd 长度还是4</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>系统在执行str.length = 2这句话的时候，先创建了一个String对象，这个对象的值是‘abcd’，我们改变的length其实是这个隐式创建的对象的length值，并不是改变了我们的原始值str，当str.length = 2;这句代码执行完之后，隐式创建的字符串对象就被销毁了，所以我们后面打印的str.length还是4。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> str </span><span class="pun">=</span><span class="pln"> </span><span class="str">‘abcd’</span><span class="pun">;</span><br>2.  <span class="pln">str</span><span class="pun">.</span><span class="pln">len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><br>3.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">str</span><span class="pun">.</span><span class="pln">len</span><span class="pun">);</span><span class="pln"> </span><span class="com">// undefined</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>其他类型的数据也是一样的，当我们给原始值加属性的时候，都是先隐式包装成对象，然后赋完属性值之后再销毁这个对象。</p>
<div class="code-pretty-container"><pre class="prettyprint linenums lang-JS prettyprinted" style=""><br>1.  <span class="kwd">var</span><span class="pln"> </span><span class="kwd">bool</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><br>2.  <span class="kwd">bool</span><span class="pun">.</span><span class="pln">len </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><br>3.  <span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="kwd">bool</span><span class="pun">.</span><span class="pln">len</span><span class="pun">);</span><span class="pln"> </span><span class="com">// undefined</span></pre><div class="code-pretty-toolbar"><span class="title">JavaScript</span><a href="javascript:void(0" target="_blank" rel="noopener"></a>; “复制代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “查看纯文本代码”)<a href="javascript:void(0" target="_blank" rel="noopener"></a>; “返回代码高亮”)<span class="msg"></span></div></div>

<p>今天的知识点就介绍到这里哟~</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">John Doe</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">33</span>
                  <span class="site-state-item-name">Artikel</span>
                </a>
              </div>
            

            

            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>

  
</div>


  <div class="powered-by">Erstellt mit  <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
